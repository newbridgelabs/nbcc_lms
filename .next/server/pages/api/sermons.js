"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/sermons";
exports.ids = ["pages/api/sermons"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "react-hot-toast":
/*!**********************************!*\
  !*** external "react-hot-toast" ***!
  \**********************************/
/***/ ((module) => {

module.exports = import("react-hot-toast");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsermons&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsermons%2Findex.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsermons&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsermons%2Findex.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_sermons_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/sermons/index.js */ \"(api)/./pages/api/sermons/index.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sermons_index_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_sermons_index_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/sermons\",\n        pathname: \"/api/sermons\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_sermons_index_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlcm1vbnMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRnNlcm1vbnMlMkZpbmRleC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2NodXJjaC1sbXMvP2MyNTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zZXJtb25zL2luZGV4LmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2VybW9uc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Nlcm1vbnNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsermons&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsermons%2Findex.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/admin-config.js":
/*!*****************************!*\
  !*** ./lib/admin-config.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ADMIN_EMAILS: () => (/* binding */ ADMIN_EMAILS),\n/* harmony export */   ADMIN_REGISTRATION_CODE: () => (/* binding */ ADMIN_REGISTRATION_CODE),\n/* harmony export */   checkAdminAccess: () => (/* binding */ checkAdminAccess),\n/* harmony export */   checkAdminAccessAPI: () => (/* binding */ checkAdminAccessAPI),\n/* harmony export */   checkAdminStatus: () => (/* binding */ checkAdminStatus),\n/* harmony export */   getAdminEmails: () => (/* binding */ getAdminEmails),\n/* harmony export */   isAdminEmail: () => (/* binding */ isAdminEmail)\n/* harmony export */ });\n/* harmony import */ var _supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./supabase */ \"(api)/./lib/supabase.js\");\n\n// ===== ADMIN CONFIGURATION =====\n// Add admin emails here - this is the ONLY place you need to update\nconst ADMIN_EMAILS = [\n    \"admin@nbcc.com\",\n    \"pastor@nbcc.com\",\n    \"mppaul1458@gmail.com\"\n];\n// Admin registration code - change this for production\nconst ADMIN_REGISTRATION_CODE = \"NBCC2025ADMIN\";\n// ===== ADMIN UTILITY FUNCTIONS =====\n/**\n * Check if a user has admin privileges\n * This function checks both database role and email-based fallback\n */ const checkAdminStatus = async (userId, email)=>{\n    try {\n        // First, check if user is admin in the database\n        const { data: userData, error } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").select(\"is_admin, role\").eq(\"id\", userId).single();\n        if (!error && userData) {\n            // If database check succeeds, use database values\n            const isAdminInDB = userData.is_admin === true || userData.role === \"admin\";\n            if (isAdminInDB) {\n                return true;\n            }\n        }\n        // Fallback to email-based check if database check fails or returns false\n        const isAdminByEmail = ADMIN_EMAILS.includes(email.toLowerCase()) || email.toLowerCase().includes(\"admin\") || email.toLowerCase().includes(\"pastor\");\n        // If user is admin by email but not in database, update database\n        if (isAdminByEmail && userId) {\n            try {\n                await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"users\").upsert({\n                    id: userId,\n                    email: email,\n                    is_admin: true,\n                    role: \"admin\"\n                }, {\n                    onConflict: \"id\",\n                    ignoreDuplicates: false\n                });\n                console.log(\"Updated admin status in database for:\", email);\n            } catch (updateError) {\n                console.warn(\"Could not update admin status in database:\", updateError.message);\n            }\n        }\n        return isAdminByEmail;\n    } catch (error) {\n        console.warn(\"Admin status check failed:\", error.message);\n        // Final fallback to email-based check\n        return ADMIN_EMAILS.includes(email.toLowerCase()) || email.toLowerCase().includes(\"admin\") || email.toLowerCase().includes(\"pastor\");\n    }\n};\n/**\n * Centralized admin access check for pages\n * Use this in all admin pages for consistent behavior\n */ const checkAdminAccess = async (router, setUser = null, setLoading = null)=>{\n    try {\n        const { data: { user: currentUser } } = await _supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.auth.getUser();\n        if (!currentUser) {\n            router.push(\"/auth/login\");\n            return {\n                isAdmin: false,\n                user: null\n            };\n        }\n        const isAdmin = await checkAdminStatus(currentUser.id, currentUser.email);\n        if (!isAdmin) {\n            console.log(\"Access denied for user:\", currentUser.email);\n            console.log(\"Admin emails:\", ADMIN_EMAILS);\n            // Show more detailed error message\n            const toast = (await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! react-hot-toast */ \"react-hot-toast\"))).default;\n            toast.error(`Access denied. Admin privileges required. Contact administrator to add ${currentUser.email} to admin list.`);\n            router.push(\"/dashboard\");\n            return {\n                isAdmin: false,\n                user: currentUser\n            };\n        }\n        if (setUser) setUser(currentUser);\n        return {\n            isAdmin: true,\n            user: currentUser\n        };\n    } catch (error) {\n        console.error(\"Error checking admin access:\", error);\n        router.push(\"/auth/login\");\n        return {\n            isAdmin: false,\n            user: null\n        };\n    } finally{\n        if (setLoading) setLoading(false);\n    }\n};\n/**\n * Check if an email is in the admin list\n */ const isAdminEmail = (email)=>{\n    return ADMIN_EMAILS.includes(email.toLowerCase()) || email.toLowerCase().includes(\"admin\") || email.toLowerCase().includes(\"pastor\");\n};\n/**\n * Get all admin emails (for display purposes)\n */ const getAdminEmails = ()=>{\n    return [\n        ...ADMIN_EMAILS\n    ];\n};\n/**\n * Check admin access for API routes\n * Use this in API endpoints that require admin privileges\n */ const checkAdminAccessAPI = async (req)=>{\n    try {\n        console.log(\"Checking admin access for API route\");\n        // Get the authorization header\n        const authHeader = req.headers.authorization;\n        console.log(\"Auth header present:\", !!authHeader);\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            console.log(\"No valid authorization header found\");\n            return {\n                user: null,\n                error: \"No authorization token provided\"\n            };\n        }\n        const token = authHeader.split(\" \")[1];\n        console.log(\"Token extracted, length:\", token?.length);\n        // Create a temporary supabase client to verify the token\n        const { createClient } = await Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! @supabase/supabase-js */ \"@supabase/supabase-js\", 23));\n        const supabaseTemp = createClient(\"https://qyhdzjzvkggcsuhnenaz.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY);\n        // Verify the JWT token\n        console.log(\"Verifying JWT token...\");\n        const { data: { user }, error: userError } = await supabaseTemp.auth.getUser(token);\n        if (userError) {\n            console.log(\"Token verification failed:\", userError.message);\n            return {\n                user: null,\n                error: `Invalid or expired token: ${userError.message}`\n            };\n        }\n        if (!user) {\n            console.log(\"No user found from token\");\n            return {\n                user: null,\n                error: \"Invalid or expired token\"\n            };\n        }\n        console.log(\"User verified:\", user.email);\n        // Check if user has admin privileges\n        const isAdmin = await checkAdminStatus(user.id, user.email);\n        console.log(\"Admin status:\", isAdmin);\n        if (!isAdmin) {\n            console.log(\"User does not have admin privileges\");\n            return {\n                user: null,\n                error: \"Admin privileges required\"\n            };\n        }\n        console.log(\"Admin access granted\");\n        return {\n            user,\n            error: null\n        };\n    } catch (error) {\n        console.error(\"API admin access check failed:\", error);\n        return {\n            user: null,\n            error: `Authentication failed: ${error.message}`\n        };\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LmpzP2Q4OGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICcuL3N1cGFiYXNlJ1xuXG4vLyA9PT09PSBBRE1JTiBDT05GSUdVUkFUSU9OID09PT09XG4vLyBBZGQgYWRtaW4gZW1haWxzIGhlcmUgLSB0aGlzIGlzIHRoZSBPTkxZIHBsYWNlIHlvdSBuZWVkIHRvIHVwZGF0ZVxuZXhwb3J0IGNvbnN0IEFETUlOX0VNQUlMUyA9IFtcbiAgJ2FkbWluQG5iY2MuY29tJyxcbiAgJ3Bhc3RvckBuYmNjLmNvbScsIFxuICAnbXBwYXVsMTQ1OEBnbWFpbC5jb20nLCAgLy8gWW91ciBlbWFpbFxuICAvLyBBZGQgbW9yZSBhZG1pbiBlbWFpbHMgaGVyZSBhcyBuZWVkZWRcbl1cblxuLy8gQWRtaW4gcmVnaXN0cmF0aW9uIGNvZGUgLSBjaGFuZ2UgdGhpcyBmb3IgcHJvZHVjdGlvblxuZXhwb3J0IGNvbnN0IEFETUlOX1JFR0lTVFJBVElPTl9DT0RFID0gJ05CQ0MyMDI1QURNSU4nXG5cbi8vID09PT09IEFETUlOIFVUSUxJVFkgRlVOQ1RJT05TID09PT09XG5cbi8qKlxuICogQ2hlY2sgaWYgYSB1c2VyIGhhcyBhZG1pbiBwcml2aWxlZ2VzXG4gKiBUaGlzIGZ1bmN0aW9uIGNoZWNrcyBib3RoIGRhdGFiYXNlIHJvbGUgYW5kIGVtYWlsLWJhc2VkIGZhbGxiYWNrXG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja0FkbWluU3RhdHVzID0gYXN5bmMgKHVzZXJJZCwgZW1haWwpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCwgY2hlY2sgaWYgdXNlciBpcyBhZG1pbiBpbiB0aGUgZGF0YWJhc2VcbiAgICBjb25zdCB7IGRhdGE6IHVzZXJEYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAuc2VsZWN0KCdpc19hZG1pbiwgcm9sZScpXG4gICAgICAuZXEoJ2lkJywgdXNlcklkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBpZiAoIWVycm9yICYmIHVzZXJEYXRhKSB7XG4gICAgICAvLyBJZiBkYXRhYmFzZSBjaGVjayBzdWNjZWVkcywgdXNlIGRhdGFiYXNlIHZhbHVlc1xuICAgICAgY29uc3QgaXNBZG1pbkluREIgPSB1c2VyRGF0YS5pc19hZG1pbiA9PT0gdHJ1ZSB8fCB1c2VyRGF0YS5yb2xlID09PSAnYWRtaW4nXG4gICAgICBpZiAoaXNBZG1pbkluREIpIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYWxsYmFjayB0byBlbWFpbC1iYXNlZCBjaGVjayBpZiBkYXRhYmFzZSBjaGVjayBmYWlscyBvciByZXR1cm5zIGZhbHNlXG4gICAgY29uc3QgaXNBZG1pbkJ5RW1haWwgPSBBRE1JTl9FTUFJTFMuaW5jbHVkZXMoZW1haWwudG9Mb3dlckNhc2UoKSkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FkbWluJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Bhc3RvcicpXG4gICAgXG4gICAgLy8gSWYgdXNlciBpcyBhZG1pbiBieSBlbWFpbCBidXQgbm90IGluIGRhdGFiYXNlLCB1cGRhdGUgZGF0YWJhc2VcbiAgICBpZiAoaXNBZG1pbkJ5RW1haWwgJiYgdXNlcklkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgICAgLnVwc2VydCh7IFxuICAgICAgICAgICAgaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgIGlzX2FkbWluOiB0cnVlLFxuICAgICAgICAgICAgcm9sZTogJ2FkbWluJ1xuICAgICAgICAgIH0sIHsgXG4gICAgICAgICAgICBvbkNvbmZsaWN0OiAnaWQnLFxuICAgICAgICAgICAgaWdub3JlRHVwbGljYXRlczogZmFsc2UgXG4gICAgICAgICAgfSlcbiAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0ZWQgYWRtaW4gc3RhdHVzIGluIGRhdGFiYXNlIGZvcjonLCBlbWFpbClcbiAgICAgIH0gY2F0Y2ggKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IHVwZGF0ZSBhZG1pbiBzdGF0dXMgaW4gZGF0YWJhc2U6JywgdXBkYXRlRXJyb3IubWVzc2FnZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXNBZG1pbkJ5RW1haWxcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oJ0FkbWluIHN0YXR1cyBjaGVjayBmYWlsZWQ6JywgZXJyb3IubWVzc2FnZSlcbiAgICBcbiAgICAvLyBGaW5hbCBmYWxsYmFjayB0byBlbWFpbC1iYXNlZCBjaGVja1xuICAgIHJldHVybiBBRE1JTl9FTUFJTFMuaW5jbHVkZXMoZW1haWwudG9Mb3dlckNhc2UoKSkgfHwgXG4gICAgICAgICAgIGVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2FkbWluJykgfHwgXG4gICAgICAgICAgIGVtYWlsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Bhc3RvcicpXG4gIH1cbn1cblxuLyoqXG4gKiBDZW50cmFsaXplZCBhZG1pbiBhY2Nlc3MgY2hlY2sgZm9yIHBhZ2VzXG4gKiBVc2UgdGhpcyBpbiBhbGwgYWRtaW4gcGFnZXMgZm9yIGNvbnNpc3RlbnQgYmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrQWRtaW5BY2Nlc3MgPSBhc3luYyAocm91dGVyLCBzZXRVc2VyID0gbnVsbCwgc2V0TG9hZGluZyA9IG51bGwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogY3VycmVudFVzZXIgfSB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKClcbiAgICBcbiAgICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgICByb3V0ZXIucHVzaCgnL2F1dGgvbG9naW4nKVxuICAgICAgcmV0dXJuIHsgaXNBZG1pbjogZmFsc2UsIHVzZXI6IG51bGwgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzQWRtaW4gPSBhd2FpdCBjaGVja0FkbWluU3RhdHVzKGN1cnJlbnRVc2VyLmlkLCBjdXJyZW50VXNlci5lbWFpbClcbiAgICBcbiAgICBpZiAoIWlzQWRtaW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdBY2Nlc3MgZGVuaWVkIGZvciB1c2VyOicsIGN1cnJlbnRVc2VyLmVtYWlsKVxuICAgICAgY29uc29sZS5sb2coJ0FkbWluIGVtYWlsczonLCBBRE1JTl9FTUFJTFMpXG4gICAgICBcbiAgICAgIC8vIFNob3cgbW9yZSBkZXRhaWxlZCBlcnJvciBtZXNzYWdlXG4gICAgICBjb25zdCB0b2FzdCA9IChhd2FpdCBpbXBvcnQoJ3JlYWN0LWhvdC10b2FzdCcpKS5kZWZhdWx0XG4gICAgICB0b2FzdC5lcnJvcihgQWNjZXNzIGRlbmllZC4gQWRtaW4gcHJpdmlsZWdlcyByZXF1aXJlZC4gQ29udGFjdCBhZG1pbmlzdHJhdG9yIHRvIGFkZCAke2N1cnJlbnRVc2VyLmVtYWlsfSB0byBhZG1pbiBsaXN0LmApXG4gICAgICByb3V0ZXIucHVzaCgnL2Rhc2hib2FyZCcpXG4gICAgICByZXR1cm4geyBpc0FkbWluOiBmYWxzZSwgdXNlcjogY3VycmVudFVzZXIgfVxuICAgIH1cblxuICAgIGlmIChzZXRVc2VyKSBzZXRVc2VyKGN1cnJlbnRVc2VyKVxuICAgIHJldHVybiB7IGlzQWRtaW46IHRydWUsIHVzZXI6IGN1cnJlbnRVc2VyIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBhZG1pbiBhY2Nlc3M6JywgZXJyb3IpXG4gICAgcm91dGVyLnB1c2goJy9hdXRoL2xvZ2luJylcbiAgICByZXR1cm4geyBpc0FkbWluOiBmYWxzZSwgdXNlcjogbnVsbCB9XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKHNldExvYWRpbmcpIHNldExvYWRpbmcoZmFsc2UpXG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbWFpbCBpcyBpbiB0aGUgYWRtaW4gbGlzdFxuICovXG5leHBvcnQgY29uc3QgaXNBZG1pbkVtYWlsID0gKGVtYWlsKSA9PiB7XG4gIHJldHVybiBBRE1JTl9FTUFJTFMuaW5jbHVkZXMoZW1haWwudG9Mb3dlckNhc2UoKSkgfHwgXG4gICAgICAgICBlbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhZG1pbicpIHx8IFxuICAgICAgICAgZW1haWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGFzdG9yJylcbn1cblxuLyoqXG4gKiBHZXQgYWxsIGFkbWluIGVtYWlscyAoZm9yIGRpc3BsYXkgcHVycG9zZXMpXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRBZG1pbkVtYWlscyA9ICgpID0+IHtcbiAgcmV0dXJuIFsuLi5BRE1JTl9FTUFJTFNdXG59XG5cbi8qKlxuICogQ2hlY2sgYWRtaW4gYWNjZXNzIGZvciBBUEkgcm91dGVzXG4gKiBVc2UgdGhpcyBpbiBBUEkgZW5kcG9pbnRzIHRoYXQgcmVxdWlyZSBhZG1pbiBwcml2aWxlZ2VzXG4gKi9cbmV4cG9ydCBjb25zdCBjaGVja0FkbWluQWNjZXNzQVBJID0gYXN5bmMgKHJlcSkgPT4ge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBhZG1pbiBhY2Nlc3MgZm9yIEFQSSByb3V0ZScpXG5cbiAgICAvLyBHZXQgdGhlIGF1dGhvcml6YXRpb24gaGVhZGVyXG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb25cbiAgICBjb25zb2xlLmxvZygnQXV0aCBoZWFkZXIgcHJlc2VudDonLCAhIWF1dGhIZWFkZXIpXG5cbiAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICBjb25zb2xlLmxvZygnTm8gdmFsaWQgYXV0aG9yaXphdGlvbiBoZWFkZXIgZm91bmQnKVxuICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgZXJyb3I6ICdObyBhdXRob3JpemF0aW9uIHRva2VuIHByb3ZpZGVkJyB9XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV1cbiAgICBjb25zb2xlLmxvZygnVG9rZW4gZXh0cmFjdGVkLCBsZW5ndGg6JywgdG9rZW4/Lmxlbmd0aClcblxuICAgIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBzdXBhYmFzZSBjbGllbnQgdG8gdmVyaWZ5IHRoZSB0b2tlblxuICAgIGNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSBhd2FpdCBpbXBvcnQoJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcycpXG4gICAgY29uc3Qgc3VwYWJhc2VUZW1wID0gY3JlYXRlQ2xpZW50KFxuICAgICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWVxuICAgIClcblxuICAgIC8vIFZlcmlmeSB0aGUgSldUIHRva2VuXG4gICAgY29uc29sZS5sb2coJ1ZlcmlmeWluZyBKV1QgdG9rZW4uLi4nKVxuICAgIGNvbnN0IHsgZGF0YTogeyB1c2VyIH0sIGVycm9yOiB1c2VyRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlVGVtcC5hdXRoLmdldFVzZXIodG9rZW4pXG5cbiAgICBpZiAodXNlckVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZygnVG9rZW4gdmVyaWZpY2F0aW9uIGZhaWxlZDonLCB1c2VyRXJyb3IubWVzc2FnZSlcbiAgICAgIHJldHVybiB7IHVzZXI6IG51bGwsIGVycm9yOiBgSW52YWxpZCBvciBleHBpcmVkIHRva2VuOiAke3VzZXJFcnJvci5tZXNzYWdlfWAgfVxuICAgIH1cblxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS5sb2coJ05vIHVzZXIgZm91bmQgZnJvbSB0b2tlbicpXG4gICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbicgfVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdVc2VyIHZlcmlmaWVkOicsIHVzZXIuZW1haWwpXG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGhhcyBhZG1pbiBwcml2aWxlZ2VzXG4gICAgY29uc3QgaXNBZG1pbiA9IGF3YWl0IGNoZWNrQWRtaW5TdGF0dXModXNlci5pZCwgdXNlci5lbWFpbClcbiAgICBjb25zb2xlLmxvZygnQWRtaW4gc3RhdHVzOicsIGlzQWRtaW4pXG5cbiAgICBpZiAoIWlzQWRtaW4pIHtcbiAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGRvZXMgbm90IGhhdmUgYWRtaW4gcHJpdmlsZWdlcycpXG4gICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogJ0FkbWluIHByaXZpbGVnZXMgcmVxdWlyZWQnIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQWRtaW4gYWNjZXNzIGdyYW50ZWQnKVxuICAgIHJldHVybiB7IHVzZXIsIGVycm9yOiBudWxsIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdBUEkgYWRtaW4gYWNjZXNzIGNoZWNrIGZhaWxlZDonLCBlcnJvcilcbiAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogYEF1dGhlbnRpY2F0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJBRE1JTl9FTUFJTFMiLCJBRE1JTl9SRUdJU1RSQVRJT05fQ09ERSIsImNoZWNrQWRtaW5TdGF0dXMiLCJ1c2VySWQiLCJlbWFpbCIsImRhdGEiLCJ1c2VyRGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImVxIiwic2luZ2xlIiwiaXNBZG1pbkluREIiLCJpc19hZG1pbiIsInJvbGUiLCJpc0FkbWluQnlFbWFpbCIsImluY2x1ZGVzIiwidG9Mb3dlckNhc2UiLCJ1cHNlcnQiLCJpZCIsIm9uQ29uZmxpY3QiLCJpZ25vcmVEdXBsaWNhdGVzIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUVycm9yIiwid2FybiIsIm1lc3NhZ2UiLCJjaGVja0FkbWluQWNjZXNzIiwicm91dGVyIiwic2V0VXNlciIsInNldExvYWRpbmciLCJ1c2VyIiwiY3VycmVudFVzZXIiLCJhdXRoIiwiZ2V0VXNlciIsInB1c2giLCJpc0FkbWluIiwidG9hc3QiLCJkZWZhdWx0IiwiaXNBZG1pbkVtYWlsIiwiZ2V0QWRtaW5FbWFpbHMiLCJjaGVja0FkbWluQWNjZXNzQVBJIiwicmVxIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic3RhcnRzV2l0aCIsInRva2VuIiwic3BsaXQiLCJsZW5ndGgiLCJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVRlbXAiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsInVzZXJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/admin-config.js\n");

/***/ }),

/***/ "(api)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getUserProfile: () => (/* binding */ getUserProfile),\n/* harmony export */   signOut: () => (/* binding */ signOut),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateUserProfile: () => (/* binding */ updateUserProfile)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\nconst supabaseUrl = \"https://qyhdzjzvkggcsuhnenaz.supabase.co\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF5aGR6anp2a2dnY3N1aG5lbmF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NjY1NzgsImV4cCI6MjA2NTA0MjU3OH0.wauN1JdrKCl82WFuwtCfq0oZVob8UEE71wjJw6otCFY\";\n// Debug logging\nconsole.log(\"\\uD83D\\uDD0D Supabase Debug Info:\");\nconsole.log(\"URL:\", supabaseUrl);\nconsole.log(\"Key exists:\", !!supabaseAnonKey);\nconsole.log(\"Key length:\", supabaseAnonKey?.length);\n// Simple check - just verify we have both values and they look valid\nconst isSupabaseConfigured = Boolean(supabaseUrl && supabaseAnonKey && supabaseUrl.includes(\"supabase.co\") && supabaseAnonKey.length > 50 // JWT tokens are typically longer than 50 chars\n);\nconsole.log(\"✅ Is Supabase configured:\", isSupabaseConfigured);\n// Always try to create the client if we have the values\nconst supabase = supabaseUrl && supabaseAnonKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey) : null;\nconsole.log(\"\\uD83D\\uDE80 Supabase client created:\", !!supabase);\n// Database helper functions\n// Helper functions\nconst getCurrentUser = async ()=>{\n    if (!supabase) {\n        console.error(\"Supabase not configured. Please set up your environment variables in .env.local\");\n        return null;\n    }\n    const { data: { user } } = await supabase.auth.getUser();\n    return user;\n};\nconst signOut = async ()=>{\n    if (!supabase) {\n        return {\n            error: new Error(\"Supabase not configured\")\n        };\n    }\n    const { error } = await supabase.auth.signOut();\n    return {\n        error\n    };\n};\nconst getUserProfile = async (userId)=>{\n    const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", userId).single();\n    return {\n        data,\n        error\n    };\n};\nconst updateUserProfile = async (userId, updates)=>{\n    const { data, error } = await supabase.from(\"users\").update(updates).eq(\"id\", userId).select().single();\n    return {\n        data,\n        error\n    };\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFvRDtBQUVwRCxNQUFNQyxjQUFjQywwQ0FBb0M7QUFDeEQsTUFBTUcsa0JBQWtCSCxrTkFBeUM7QUFFakUsZ0JBQWdCO0FBQ2hCSyxRQUFRQyxHQUFHLENBQUM7QUFDWkQsUUFBUUMsR0FBRyxDQUFDLFFBQVFQO0FBQ3BCTSxRQUFRQyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUNIO0FBQzdCRSxRQUFRQyxHQUFHLENBQUMsZUFBZUgsaUJBQWlCSTtBQUU1QyxxRUFBcUU7QUFDckUsTUFBTUMsdUJBQXVCQyxRQUMzQlYsZUFDQUksbUJBQ0FKLFlBQVlXLFFBQVEsQ0FBQyxrQkFDckJQLGdCQUFnQkksTUFBTSxHQUFHLEdBQUcsZ0RBQWdEOztBQUc5RUYsUUFBUUMsR0FBRyxDQUFDLDZCQUE2QkU7QUFFekMsd0RBQXdEO0FBQ2pELE1BQU1HLFdBQVcsZUFBZ0JSLGtCQUNwQ0wsbUVBQVlBLENBQUNDLGFBQWFJLG1CQUMxQixLQUFJO0FBRVJFLFFBQVFDLEdBQUcsQ0FBQyx5Q0FBK0IsQ0FBQyxDQUFDSztBQUU3Qyw0QkFBNEI7QUFFNUIsbUJBQW1CO0FBQ1osTUFBTUMsaUJBQWlCO0lBQzVCLElBQUksQ0FBQ0QsVUFBVTtRQUNiTixRQUFRUSxLQUFLLENBQUM7UUFDZCxPQUFPO0lBQ1Q7SUFDQSxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQUUsR0FBRyxNQUFNSixTQUFTSyxJQUFJLENBQUNDLE9BQU87SUFDdEQsT0FBT0Y7QUFDVCxFQUFDO0FBRU0sTUFBTUcsVUFBVTtJQUNyQixJQUFJLENBQUNQLFVBQVU7UUFDYixPQUFPO1lBQUVFLE9BQU8sSUFBSU0sTUFBTTtRQUEyQjtJQUN2RDtJQUNBLE1BQU0sRUFBRU4sS0FBSyxFQUFFLEdBQUcsTUFBTUYsU0FBU0ssSUFBSSxDQUFDRSxPQUFPO0lBQzdDLE9BQU87UUFBRUw7SUFBTTtBQUNqQixFQUFDO0FBRU0sTUFBTU8saUJBQWlCLE9BQU9DO0lBQ25DLE1BQU0sRUFBRVAsSUFBSSxFQUFFRCxLQUFLLEVBQUUsR0FBRyxNQUFNRixTQUMzQlcsSUFBSSxDQUFDLFNBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxFQUFFLENBQUMsTUFBTUgsUUFDVEksTUFBTTtJQUVULE9BQU87UUFBRVg7UUFBTUQ7SUFBTTtBQUN2QixFQUFDO0FBRU0sTUFBTWEsb0JBQW9CLE9BQU9MLFFBQVFNO0lBQzlDLE1BQU0sRUFBRWIsSUFBSSxFQUFFRCxLQUFLLEVBQUUsR0FBRyxNQUFNRixTQUMzQlcsSUFBSSxDQUFDLFNBQ0xNLE1BQU0sQ0FBQ0QsU0FDUEgsRUFBRSxDQUFDLE1BQU1ILFFBQ1RFLE1BQU0sR0FDTkUsTUFBTTtJQUVULE9BQU87UUFBRVg7UUFBTUQ7SUFBTTtBQUN2QixFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2h1cmNoLWxtcy8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcbmNvbnN0IHN1cGFiYXNlQW5vbktleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXG5cbi8vIERlYnVnIGxvZ2dpbmdcbmNvbnNvbGUubG9nKCfwn5SNIFN1cGFiYXNlIERlYnVnIEluZm86JylcbmNvbnNvbGUubG9nKCdVUkw6Jywgc3VwYWJhc2VVcmwpXG5jb25zb2xlLmxvZygnS2V5IGV4aXN0czonLCAhIXN1cGFiYXNlQW5vbktleSlcbmNvbnNvbGUubG9nKCdLZXkgbGVuZ3RoOicsIHN1cGFiYXNlQW5vbktleT8ubGVuZ3RoKVxuXG4vLyBTaW1wbGUgY2hlY2sgLSBqdXN0IHZlcmlmeSB3ZSBoYXZlIGJvdGggdmFsdWVzIGFuZCB0aGV5IGxvb2sgdmFsaWRcbmNvbnN0IGlzU3VwYWJhc2VDb25maWd1cmVkID0gQm9vbGVhbihcbiAgc3VwYWJhc2VVcmwgJiZcbiAgc3VwYWJhc2VBbm9uS2V5ICYmXG4gIHN1cGFiYXNlVXJsLmluY2x1ZGVzKCdzdXBhYmFzZS5jbycpICYmXG4gIHN1cGFiYXNlQW5vbktleS5sZW5ndGggPiA1MCAvLyBKV1QgdG9rZW5zIGFyZSB0eXBpY2FsbHkgbG9uZ2VyIHRoYW4gNTAgY2hhcnNcbilcblxuY29uc29sZS5sb2coJ+KchSBJcyBTdXBhYmFzZSBjb25maWd1cmVkOicsIGlzU3VwYWJhc2VDb25maWd1cmVkKVxuXG4vLyBBbHdheXMgdHJ5IHRvIGNyZWF0ZSB0aGUgY2xpZW50IGlmIHdlIGhhdmUgdGhlIHZhbHVlc1xuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gKHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlQW5vbktleSlcbiAgPyBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSlcbiAgOiBudWxsXG5cbmNvbnNvbGUubG9nKCfwn5qAIFN1cGFiYXNlIGNsaWVudCBjcmVhdGVkOicsICEhc3VwYWJhc2UpXG5cbi8vIERhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnNcblxuLy8gSGVscGVyIGZ1bmN0aW9uc1xuZXhwb3J0IGNvbnN0IGdldEN1cnJlbnRVc2VyID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoIXN1cGFiYXNlKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VwYWJhc2Ugbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBzZXQgdXAgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gLmVudi5sb2NhbCcpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9IH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoKVxuICByZXR1cm4gdXNlclxufVxuXG5leHBvcnQgY29uc3Qgc2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgaWYgKCFzdXBhYmFzZSkge1xuICAgIHJldHVybiB7IGVycm9yOiBuZXcgRXJyb3IoJ1N1cGFiYXNlIG5vdCBjb25maWd1cmVkJykgfVxuICB9XG4gIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguc2lnbk91dCgpXG4gIHJldHVybiB7IGVycm9yIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldFVzZXJQcm9maWxlID0gYXN5bmMgKHVzZXJJZCkgPT4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VycycpXG4gICAgLnNlbGVjdCgnKicpXG4gICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAuc2luZ2xlKClcbiAgXG4gIHJldHVybiB7IGRhdGEsIGVycm9yIH1cbn1cblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJQcm9maWxlID0gYXN5bmMgKHVzZXJJZCwgdXBkYXRlcykgPT4ge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgIC5mcm9tKCd1c2VycycpXG4gICAgLnVwZGF0ZSh1cGRhdGVzKVxuICAgIC5lcSgnaWQnLCB1c2VySWQpXG4gICAgLnNlbGVjdCgpXG4gICAgLnNpbmdsZSgpXG4gIFxuICByZXR1cm4geyBkYXRhLCBlcnJvciB9XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50Iiwic3VwYWJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VBbm9uS2V5IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkiLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwiaXNTdXBhYmFzZUNvbmZpZ3VyZWQiLCJCb29sZWFuIiwiaW5jbHVkZXMiLCJzdXBhYmFzZSIsImdldEN1cnJlbnRVc2VyIiwiZXJyb3IiLCJkYXRhIiwidXNlciIsImF1dGgiLCJnZXRVc2VyIiwic2lnbk91dCIsIkVycm9yIiwiZ2V0VXNlclByb2ZpbGUiLCJ1c2VySWQiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJ1cGRhdGVVc2VyUHJvZmlsZSIsInVwZGF0ZXMiLCJ1cGRhdGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.js\n");

/***/ }),

/***/ "(api)/./pages/api/sermons/index.js":
/*!************************************!*\
  !*** ./pages/api/sermons/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_admin_config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/admin-config */ \"(api)/./lib/admin-config.js\");\n\n\nconst supabaseUrl = \"https://qyhdzjzvkggcsuhnenaz.supabase.co\";\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey);\nasync function handler(req, res) {\n    try {\n        // Get user from session cookie or auth header (for authenticated requests)\n        const authHeader = req.headers.authorization;\n        const sessionCookie = req.cookies[\"sb-access-token\"] || req.cookies[\"supabase-auth-token\"];\n        let user = null;\n        if (authHeader && authHeader.startsWith(\"Bearer \")) {\n            const token = authHeader.substring(7);\n            const { data: { user: authUser }, error } = await supabase.auth.getUser(token);\n            if (!error) user = authUser;\n        } else if (sessionCookie) {\n            const { data: { user: authUser }, error } = await supabase.auth.getUser(sessionCookie);\n            if (!error) user = authUser;\n        }\n        if (req.method === \"GET\") {\n            // Get all active sermons\n            const { data: sermons, error } = await supabase.from(\"sermons\").select(`\n          *,\n          sermon_questions (\n            id,\n            question_text,\n            question_order,\n            is_private,\n            placeholder_text\n          )\n        `).eq(\"is_active\", true).order(\"sermon_date\", {\n                ascending: false\n            }).order(\"question_order\", {\n                foreignTable: \"sermon_questions\",\n                ascending: true\n            });\n            if (error) {\n                throw error;\n            }\n            return res.status(200).json({\n                sermons\n            });\n        }\n        if (req.method === \"POST\") {\n            // Create new sermon (admin only)\n            if (!user) {\n                return res.status(401).json({\n                    error: \"Authentication required\"\n                });\n            }\n            const isAdmin = await (0,_lib_admin_config__WEBPACK_IMPORTED_MODULE_1__.checkAdminStatus)(user.id, user.email);\n            if (!isAdmin) {\n                return res.status(403).json({\n                    error: \"Admin access required\"\n                });\n            }\n            const { title, description, sermon_date, pastor_name, scripture_reference, questions = [] } = req.body;\n            if (!title || !sermon_date) {\n                return res.status(400).json({\n                    error: \"Title and sermon date are required\"\n                });\n            }\n            // Create sermon\n            const { data: sermon, error: sermonError } = await supabase.from(\"sermons\").insert({\n                title,\n                description,\n                sermon_date,\n                pastor_name,\n                scripture_reference,\n                created_by: user.id\n            }).select().single();\n            if (sermonError) {\n                throw sermonError;\n            }\n            // Create questions if provided\n            if (questions.length > 0) {\n                const questionsToInsert = questions.map((q, index)=>({\n                        sermon_id: sermon.id,\n                        question_text: q.question_text,\n                        question_order: index + 1,\n                        is_private: q.is_private !== false,\n                        placeholder_text: q.placeholder_text || \"\"\n                    }));\n                const { error: questionsError } = await supabase.from(\"sermon_questions\").insert(questionsToInsert);\n                if (questionsError) {\n                    throw questionsError;\n                }\n            }\n            // Fetch complete sermon with questions\n            const { data: completeSermon, error: fetchError } = await supabase.from(\"sermons\").select(`\n          *,\n          sermon_questions (\n            id,\n            question_text,\n            question_order,\n            is_private,\n            placeholder_text\n          )\n        `).eq(\"id\", sermon.id).order(\"question_order\", {\n                foreignTable: \"sermon_questions\",\n                ascending: true\n            }).single();\n            if (fetchError) {\n                throw fetchError;\n            }\n            return res.status(201).json({\n                sermon: completeSermon\n            });\n        }\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Sermons API error:\", error);\n        return res.status(500).json({\n            error: error.message || \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFWixPQUFPQSxNQUFNMEMsT0FBTyxJQUFJO1FBQXdCO0lBQ2hGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jaHVyY2gtbG1zLy4vcGFnZXMvYXBpL3Nlcm1vbnMvaW5kZXguanM/ZWQwYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXG5pbXBvcnQgeyBjaGVja0FkbWluU3RhdHVzIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FkbWluLWNvbmZpZydcblxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkxcbmNvbnN0IHN1cGFiYXNlU2VydmljZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVlcblxuY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlU2VydmljZUtleSlcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICB0cnkge1xuICAgIC8vIEdldCB1c2VyIGZyb20gc2Vzc2lvbiBjb29raWUgb3IgYXV0aCBoZWFkZXIgKGZvciBhdXRoZW50aWNhdGVkIHJlcXVlc3RzKVxuICAgIGNvbnN0IGF1dGhIZWFkZXIgPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uXG4gICAgY29uc3Qgc2Vzc2lvbkNvb2tpZSA9IHJlcS5jb29raWVzWydzYi1hY2Nlc3MtdG9rZW4nXSB8fCByZXEuY29va2llc1snc3VwYWJhc2UtYXV0aC10b2tlbiddXG5cbiAgICBsZXQgdXNlciA9IG51bGxcblxuICAgIGlmIChhdXRoSGVhZGVyICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpXG4gICAgICBjb25zdCB7IGRhdGE6IHsgdXNlcjogYXV0aFVzZXIgfSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcih0b2tlbilcbiAgICAgIGlmICghZXJyb3IpIHVzZXIgPSBhdXRoVXNlclxuICAgIH0gZWxzZSBpZiAoc2Vzc2lvbkNvb2tpZSkge1xuICAgICAgY29uc3QgeyBkYXRhOiB7IHVzZXI6IGF1dGhVc2VyIH0sIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLmdldFVzZXIoc2Vzc2lvbkNvb2tpZSlcbiAgICAgIGlmICghZXJyb3IpIHVzZXIgPSBhdXRoVXNlclxuICAgIH1cblxuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgICAgLy8gR2V0IGFsbCBhY3RpdmUgc2VybW9uc1xuICAgICAgY29uc3QgeyBkYXRhOiBzZXJtb25zLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Nlcm1vbnMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIHNlcm1vbl9xdWVzdGlvbnMgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBxdWVzdGlvbl90ZXh0LFxuICAgICAgICAgICAgcXVlc3Rpb25fb3JkZXIsXG4gICAgICAgICAgICBpc19wcml2YXRlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXJfdGV4dFxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLmVxKCdpc19hY3RpdmUnLCB0cnVlKVxuICAgICAgICAub3JkZXIoJ3Nlcm1vbl9kYXRlJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5vcmRlcigncXVlc3Rpb25fb3JkZXInLCB7IGZvcmVpZ25UYWJsZTogJ3Nlcm1vbl9xdWVzdGlvbnMnLCBhc2NlbmRpbmc6IHRydWUgfSlcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHNlcm1vbnMgfSlcbiAgICB9XG5cbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICAvLyBDcmVhdGUgbmV3IHNlcm1vbiAoYWRtaW4gb25seSlcbiAgICAgIGlmICghdXNlcikge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBpc0FkbWluID0gYXdhaXQgY2hlY2tBZG1pblN0YXR1cyh1c2VyLmlkLCB1c2VyLmVtYWlsKVxuICAgICAgaWYgKCFpc0FkbWluKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMykuanNvbih7IGVycm9yOiAnQWRtaW4gYWNjZXNzIHJlcXVpcmVkJyB9KVxuICAgICAgfVxuXG4gICAgICBjb25zdCB7XG4gICAgICAgIHRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgc2VybW9uX2RhdGUsXG4gICAgICAgIHBhc3Rvcl9uYW1lLFxuICAgICAgICBzY3JpcHR1cmVfcmVmZXJlbmNlLFxuICAgICAgICBxdWVzdGlvbnMgPSBbXVxuICAgICAgfSA9IHJlcS5ib2R5XG5cbiAgICAgIGlmICghdGl0bGUgfHwgIXNlcm1vbl9kYXRlKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnVGl0bGUgYW5kIHNlcm1vbiBkYXRlIGFyZSByZXF1aXJlZCcgfSlcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHNlcm1vblxuICAgICAgY29uc3QgeyBkYXRhOiBzZXJtb24sIGVycm9yOiBzZXJtb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Nlcm1vbnMnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgICBzZXJtb25fZGF0ZSxcbiAgICAgICAgICBwYXN0b3JfbmFtZSxcbiAgICAgICAgICBzY3JpcHR1cmVfcmVmZXJlbmNlLFxuICAgICAgICAgIGNyZWF0ZWRfYnk6IHVzZXIuaWRcbiAgICAgICAgfSlcbiAgICAgICAgLnNlbGVjdCgpXG4gICAgICAgIC5zaW5nbGUoKVxuXG4gICAgICBpZiAoc2VybW9uRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgc2VybW9uRXJyb3JcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHF1ZXN0aW9ucyBpZiBwcm92aWRlZFxuICAgICAgaWYgKHF1ZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHF1ZXN0aW9uc1RvSW5zZXJ0ID0gcXVlc3Rpb25zLm1hcCgocSwgaW5kZXgpID0+ICh7XG4gICAgICAgICAgc2VybW9uX2lkOiBzZXJtb24uaWQsXG4gICAgICAgICAgcXVlc3Rpb25fdGV4dDogcS5xdWVzdGlvbl90ZXh0LFxuICAgICAgICAgIHF1ZXN0aW9uX29yZGVyOiBpbmRleCArIDEsXG4gICAgICAgICAgaXNfcHJpdmF0ZTogcS5pc19wcml2YXRlICE9PSBmYWxzZSwgLy8gZGVmYXVsdCB0byBwcml2YXRlXG4gICAgICAgICAgcGxhY2Vob2xkZXJfdGV4dDogcS5wbGFjZWhvbGRlcl90ZXh0IHx8ICcnXG4gICAgICAgIH0pKVxuXG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHF1ZXN0aW9uc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAgIC5mcm9tKCdzZXJtb25fcXVlc3Rpb25zJylcbiAgICAgICAgICAuaW5zZXJ0KHF1ZXN0aW9uc1RvSW5zZXJ0KVxuXG4gICAgICAgIGlmIChxdWVzdGlvbnNFcnJvcikge1xuICAgICAgICAgIHRocm93IHF1ZXN0aW9uc0Vycm9yXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmV0Y2ggY29tcGxldGUgc2VybW9uIHdpdGggcXVlc3Rpb25zXG4gICAgICBjb25zdCB7IGRhdGE6IGNvbXBsZXRlU2VybW9uLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3Nlcm1vbnMnKVxuICAgICAgICAuc2VsZWN0KGBcbiAgICAgICAgICAqLFxuICAgICAgICAgIHNlcm1vbl9xdWVzdGlvbnMgKFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBxdWVzdGlvbl90ZXh0LFxuICAgICAgICAgICAgcXVlc3Rpb25fb3JkZXIsXG4gICAgICAgICAgICBpc19wcml2YXRlLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXJfdGV4dFxuICAgICAgICAgIClcbiAgICAgICAgYClcbiAgICAgICAgLmVxKCdpZCcsIHNlcm1vbi5pZClcbiAgICAgICAgLm9yZGVyKCdxdWVzdGlvbl9vcmRlcicsIHsgZm9yZWlnblRhYmxlOiAnc2VybW9uX3F1ZXN0aW9ucycsIGFzY2VuZGluZzogdHJ1ZSB9KVxuICAgICAgICAuc2luZ2xlKClcblxuICAgICAgaWYgKGZldGNoRXJyb3IpIHtcbiAgICAgICAgdGhyb3cgZmV0Y2hFcnJvclxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDEpLmpzb24oeyBzZXJtb246IGNvbXBsZXRlU2VybW9uIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU2VybW9ucyBBUEkgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSlcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImNoZWNrQWRtaW5TdGF0dXMiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZVNlcnZpY2VLZXkiLCJTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIiwic3VwYWJhc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwic2Vzc2lvbkNvb2tpZSIsImNvb2tpZXMiLCJ1c2VyIiwic3RhcnRzV2l0aCIsInRva2VuIiwic3Vic3RyaW5nIiwiZGF0YSIsImF1dGhVc2VyIiwiZXJyb3IiLCJhdXRoIiwiZ2V0VXNlciIsIm1ldGhvZCIsInNlcm1vbnMiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsImZvcmVpZ25UYWJsZSIsInN0YXR1cyIsImpzb24iLCJpc0FkbWluIiwiaWQiLCJlbWFpbCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzZXJtb25fZGF0ZSIsInBhc3Rvcl9uYW1lIiwic2NyaXB0dXJlX3JlZmVyZW5jZSIsInF1ZXN0aW9ucyIsImJvZHkiLCJzZXJtb24iLCJzZXJtb25FcnJvciIsImluc2VydCIsImNyZWF0ZWRfYnkiLCJzaW5nbGUiLCJsZW5ndGgiLCJxdWVzdGlvbnNUb0luc2VydCIsIm1hcCIsInEiLCJpbmRleCIsInNlcm1vbl9pZCIsInF1ZXN0aW9uX3RleHQiLCJxdWVzdGlvbl9vcmRlciIsImlzX3ByaXZhdGUiLCJwbGFjZWhvbGRlcl90ZXh0IiwicXVlc3Rpb25zRXJyb3IiLCJjb21wbGV0ZVNlcm1vbiIsImZldGNoRXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/sermons/index.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsermons&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsermons%2Findex.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();