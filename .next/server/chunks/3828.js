exports.id=3828,exports.ids=[3828],exports.modules={2175:(e,r,s)=>{"use strict";s.d(r,{Z:()=>o});var t=s(997),a=s(6689),n=s(9203),i=s(2149),l=s(8154);function o(){let[e,r]=(0,a.useState)(!1),[s,o]=(0,a.useState)(!0);return!e||s?null:t.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx(n.Z,{className:"h-5 w-5 text-yellow-400"})}),(0,t.jsxs)("div",{className:"ml-3 flex-1",children:[(0,t.jsxs)("p",{className:"text-sm text-yellow-700",children:[t.jsx("strong",{children:"Supabase not configured:"})," Please set up your environment variables in .env.local"]}),t.jsx("div",{className:"mt-2 text-sm text-yellow-600",children:(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[(0,t.jsxs)("li",{children:["Create a free Supabase project at ",t.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-yellow-800",children:"supabase.com"})]}),t.jsx("li",{children:"Copy your project URL and anon key"}),(0,t.jsxs)("li",{children:["Update the values in ",t.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})]}),t.jsx("li",{children:"Restart the development server"})]})}),t.jsx("div",{className:"mt-3",children:(0,t.jsxs)("a",{href:"/setup",className:"inline-flex items-center text-sm text-yellow-700 hover:text-yellow-800 underline",children:[t.jsx(i.Z,{className:"h-4 w-4 mr-1"}),"View Setup Guide"]})})]}),t.jsx("div",{className:"ml-auto pl-3",children:t.jsx("div",{className:"-mx-1.5 -my-1.5",children:(0,t.jsxs)("button",{onClick:()=>r(!1),className:"inline-flex rounded-md bg-yellow-50 p-1.5 text-yellow-500 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-yellow-600 focus:ring-offset-2 focus:ring-offset-yellow-50",children:[t.jsx("span",{className:"sr-only",children:"Dismiss"}),t.jsx(l.Z,{className:"h-5 w-5"})]})})})]})})}},2627:(e,r,s)=>{"use strict";function t(){return null}s.d(r,{Z:()=>t,n:()=>a}),s(6689),s(8655);let a=async e=>{try{let r="service_6p2szkk",s="template_h0ekplo",t="vjXyYpLgDibpvaLPL";if(console.log("=== CLIENT-SIDE EMAIL SENDING ==="),console.log("Service ID:",r),console.log("Template ID:",s),console.log("User ID:",t),console.log("Template params:",e),!r||!s||!t)throw Error("EmailJS configuration missing");throw Error("EmailJS can only be used in browser environment")}catch(r){console.error("❌ Client email error:",r);let e=r.message;return r.message.includes("user ID is required")?e="EmailJS User ID configuration issue. Please check your EmailJS dashboard integration settings.":r.message.includes("service")?e="EmailJS Service configuration issue. Please verify your service is active.":r.message.includes("template")&&(e="EmailJS Template configuration issue. Please verify your template exists and is published."),{success:!1,error:e,originalError:r.message}}}},1398:(e,r,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.d(r,{Z:()=>b});var a=s(997),n=s(6689),i=s(1163),l=s(2732);s(4713);var o=s(7188),c=s(3663),m=s(1952),d=s(3696),h=s(8154),u=s(760),x=s(2175),p=s(2627),g=s(6201),y=e([g]);function b({children:e,requireAuth:r=!1}){let[s,t]=(0,n.useState)(null),[y,b]=(0,n.useState)(!0),[f,j]=(0,n.useState)(!1),[v,N]=(0,n.useState)(!1),w=(0,i.useRouter)(),C=()=>{v?w.push("/admin"):w.push("/dashboard")},k=()=>{v?w.push("/admin/upload"):w.push("/sections/1")},S=()=>{v?w.push("/admin/agreements"):w.push("/agreement")},I=()=>{v?w.push("/admin/sermons"):w.push("/sermons")},Z=async()=>{try{l.OQ?await (0,l.w7)():t(null),g.default.success("Signed out successfully"),w.push("/")}catch(e){g.default.error("Error signing out")}};if(y)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsx("div",{className:"loading-spinner"})});if(r&&!s)return null;let D=w.pathname.startsWith("/auth/"),E=s&&!D;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx(p.Z,{}),(0,a.jsxs)("nav",{className:"bg-white shadow-lg border-b border-gray-200",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center",children:[a.jsx(o.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary"}),a.jsx("span",{className:"ml-2 text-lg sm:text-xl font-bold text-gray-900",children:"NBCC LMS"})]}),E&&(0,a.jsxs)("div",{className:"hidden md:ml-6 md:flex md:space-x-8",children:[(0,a.jsxs)("button",{onClick:C,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/dashboard"===w.pathname||"/admin"===w.pathname?"border-church-primary text-church-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(c.Z,{className:"h-4 w-4 mr-1"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:k,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${w.pathname.startsWith("/sections")||"/admin/upload"===w.pathname?"border-church-primary text-church-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(o.Z,{className:"h-4 w-4 mr-1"}),"Study Materials"]}),(0,a.jsxs)("button",{onClick:I,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${w.pathname.startsWith("/sermons")||w.pathname.startsWith("/admin/sermons")?"border-church-primary text-church-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(o.Z,{className:"h-4 w-4 mr-1"}),"Sermons"]}),(0,a.jsxs)("button",{onClick:S,className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium ${"/agreement"===w.pathname||w.pathname.startsWith("/admin/agreements")?"border-church-primary text-church-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(m.Z,{className:"h-4 w-4 mr-1"}),"Agreement"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[E?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"hidden md:block text-sm text-gray-700",children:["Welcome, ",s.user_metadata?.full_name||s.email]}),(0,a.jsxs)("button",{onClick:Z,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-church-primary hover:bg-church-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:[a.jsx(d.Z,{className:"h-4 w-4 mr-1"}),"Sign Out"]})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>w.push("/auth/login"),className:"text-gray-500 hover:text-gray-700 px-3 py-2 rounded-md text-sm font-medium",children:"Sign In"}),a.jsx("button",{onClick:()=>w.push("/auth/register"),className:"bg-church-primary hover:bg-church-secondary text-white px-4 py-2 rounded-md text-sm font-medium",children:"Register"})]}),E&&a.jsx("div",{className:"md:hidden ml-4",children:a.jsx("button",{onClick:()=>j(!f),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:f?a.jsx(h.Z,{className:"h-6 w-6"}):a.jsx(u.Z,{className:"h-6 w-6"})})})]})]})}),E&&f&&(0,a.jsxs)("div",{className:"md:hidden",children:[s&&a.jsx("div",{className:"pt-4 pb-3 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"px-4",children:[a.jsx("div",{className:"text-base font-medium text-gray-800 truncate",children:s.user_metadata?.full_name||"User"}),a.jsx("div",{className:"text-sm font-medium text-gray-500 truncate",children:s.email})]})}),(0,a.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,a.jsxs)("button",{onClick:()=>{C(),j(!1)},className:`block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] transition-colors duration-200 ${"/dashboard"===w.pathname||"/admin"===w.pathname?"border-church-primary text-church-primary bg-church-primary bg-opacity-10":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[a.jsx(c.Z,{className:"h-5 w-5 inline mr-3"}),"Dashboard"]}),(0,a.jsxs)("button",{onClick:()=>{k(),j(!1)},className:`block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] transition-colors duration-200 ${w.pathname.startsWith("/sections")||"/admin/upload"===w.pathname?"border-church-primary text-church-primary bg-church-primary bg-opacity-10":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[a.jsx(o.Z,{className:"h-5 w-5 inline mr-3"}),"Study Materials"]}),(0,a.jsxs)("button",{onClick:()=>{I(),j(!1)},className:`block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] transition-colors duration-200 ${w.pathname.startsWith("/sermons")||w.pathname.startsWith("/admin/sermons")?"border-church-primary text-church-primary bg-church-primary bg-opacity-10":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[a.jsx(o.Z,{className:"h-5 w-5 inline mr-3"}),"Sermons"]}),(0,a.jsxs)("button",{onClick:()=>{S(),j(!1)},className:`block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] transition-colors duration-200 ${"/agreement"===w.pathname||w.pathname.startsWith("/admin/agreements")?"border-church-primary text-church-primary bg-church-primary bg-opacity-10":"border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[a.jsx(m.Z,{className:"h-5 w-5 inline mr-3"}),"Agreement"]}),s&&(0,a.jsxs)("button",{onClick:()=>{Z(),j(!1)},className:"block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] border-transparent text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors duration-200",children:[a.jsx(d.Z,{className:"h-5 w-5 inline mr-3"}),"Sign Out"]}),!s&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{w.push("/auth/login"),j(!1)},className:"block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50 transition-colors duration-200",children:"Sign In"}),a.jsx("button",{onClick:()=>{w.push("/auth/register"),j(!1)},className:"block pl-3 pr-4 py-4 border-l-4 text-base font-medium w-full text-left min-h-[44px] border-church-primary text-church-primary bg-church-primary bg-opacity-10 transition-colors duration-200",children:"Register"})]})]})]})]}),(0,a.jsxs)("main",{className:"flex-1",children:[!l.OQ&&a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsx(x.Z,{})}),e]}),a.jsx("footer",{className:"bg-gray-50 border-t border-gray-200 mt-auto",children:a.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2 leading-relaxed",children:"\xa9 2025 New Bridge Community Church Learning Management System"}),a.jsx("div",{className:"text-xs text-gray-500 leading-relaxed",children:"Built with love for our church community • Powered by faith and technology"})]})})})]})}g=(y.then?(await y)():y)[0],t()}catch(e){t(e)}})},4713:(e,r,s)=>{"use strict";s.d(r,{Cn:()=>i,UZ:()=>n,jW:()=>l});var t=s(2732);let a=["admin@nbcc.com","pastor@nbcc.com","mppaul1458@gmail.com"],n="NBCC2025ADMIN",i=async(e,r)=>{try{let{data:s,error:n}=await t.OQ.from("users").select("is_admin, role").eq("id",e).single();if(!n&&s&&(!0===s.is_admin||"admin"===s.role))return!0;let i=a.includes(r.toLowerCase())||r.toLowerCase().includes("admin")||r.toLowerCase().includes("pastor");if(i&&e)try{await t.OQ.from("users").upsert({id:e,email:r,is_admin:!0,role:"admin"},{onConflict:"id",ignoreDuplicates:!1}),console.log("Updated admin status in database for:",r)}catch(e){console.warn("Could not update admin status in database:",e.message)}return i}catch(e){return console.warn("Admin status check failed:",e.message),a.includes(r.toLowerCase())||r.toLowerCase().includes("admin")||r.toLowerCase().includes("pastor")}},l=async(e,r=null,n=null)=>{try{let{data:{user:n}}=await t.OQ.auth.getUser();if(!n)return e.push("/auth/login"),{isAdmin:!1,user:null};if(!await i(n.id,n.email))return console.log("Access denied for user:",n.email),console.log("Admin emails:",a),(await Promise.resolve().then(s.bind(s,6201))).default.error(`Access denied. Admin privileges required. Contact administrator to add ${n.email} to admin list.`),e.push("/dashboard"),{isAdmin:!1,user:n};return r&&r(n),{isAdmin:!0,user:n}}catch(r){return console.error("Error checking admin access:",r),e.push("/auth/login"),{isAdmin:!1,user:null}}finally{n&&n(!1)}}},2732:(e,r,s)=>{"use strict";s.d(r,{OQ:()=>i,ts:()=>l,w7:()=>o});var t=s(2885);let a="https://qyhdzjzvkggcsuhnenaz.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF5aGR6anp2a2dnY3N1aG5lbmF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0NjY1NzgsImV4cCI6MjA2NTA0MjU3OH0.wauN1JdrKCl82WFuwtCfq0oZVob8UEE71wjJw6otCFY";console.log("\uD83D\uDD0D Supabase Debug Info:"),console.log("URL:",a),console.log("Key exists:",!!n),console.log("Key length:",n?.length),console.log("✅ Is Supabase configured:",!!(a&&n&&a.includes("supabase.co")&&n.length>50));let i=a&&n?(0,t.createClient)(a,n):null;console.log("\uD83D\uDE80 Supabase client created:",!!i);let l=async()=>{if(!i)return console.error("Supabase not configured. Please set up your environment variables in .env.local"),null;let{data:{user:e}}=await i.auth.getUser();return e},o=async()=>{if(!i)return{error:Error("Supabase not configured")};let{error:e}=await i.auth.signOut();return{error:e}}},3414:(e,r,s)=>{"use strict";s.a(e,async(e,t)=>{try{s.r(r),s.d(r,{default:()=>l});var a=s(997);s(6764);var n=s(6201),i=e([n]);function l({Component:e,pageProps:r}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(e,{...r}),a.jsx(n.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}})]})}n=(i.then?(await i)():i)[0],t()}catch(e){t(e)}})},6764:()=>{}};