(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1258],{7381:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/agreement-status",function(){return s(764)}])},2761:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},493:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},2779:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},764:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(5893),a=s(7294),n=s(1163),i=s(4733),l=s(1046),c=s(39),o=s(493),d=s(2553),m=s(2761),h=s(2779),u=s(6501);function x(){var e;let[t,s]=(0,a.useState)(null),[x,g]=(0,a.useState)(null),[p,f]=(0,a.useState)(!0),y=(0,n.useRouter)();(0,a.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await (0,l.ts)();if(!e){y.push("/auth/login");return}s(e);let{data:t,error:r}=await l.OQ.from("agreements").select("*").eq("user_id",e.id).single();if(r){if("PGRST116"===r.code){y.push("/agreement");return}throw r}g(t)}catch(e){console.error("Error loading agreement status:",e),u.default.error("Failed to load agreement status")}finally{f(!1)}},b=async()=>{if(!(null==x?void 0:x.pdf_url)){u.default.error("PDF not available yet");return}try{window.open(x.pdf_url,"_blank")}catch(e){console.error("Error downloading PDF:",e),u.default.error("Failed to download PDF")}};if(p)return(0,r.jsx)(i.Z,{requireAuth:!0,children:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"loading-spinner"})})});if(!x)return(0,r.jsx)(i.Z,{requireAuth:!0,children:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"No agreement found"}),(0,r.jsx)("button",{onClick:()=>y.push("/agreement"),className:"mt-4 text-church-primary hover:text-church-secondary",children:"Submit your agreement"})]})})});let N=(()=>{switch(x.status){case"pending":return{icon:(0,r.jsx)(c.Z,{className:"h-8 w-8 text-yellow-500"}),title:"Agreement Under Review",description:"Your membership agreement has been submitted and is currently being reviewed by church leadership.",bgColor:"bg-yellow-50",borderColor:"border-yellow-200"};case"completed":return{icon:(0,r.jsx)(o.Z,{className:"h-8 w-8 text-green-500"}),title:"Agreement Approved",description:"Congratulations! Your membership agreement has been approved and signed by church leadership.",bgColor:"bg-green-50",borderColor:"border-green-200"};default:return{icon:(0,r.jsx)(d.Z,{className:"h-8 w-8 text-gray-500"}),title:"Agreement Status Unknown",description:"Please contact church administration for more information.",bgColor:"bg-gray-50",borderColor:"border-gray-200"}}})();return(0,r.jsx)(i.Z,{requireAuth:!0,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("button",{onClick:()=>y.push("/dashboard"),className:"mr-4 p-2 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(m.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-8 w-8 text-church-primary mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Membership Agreement Status"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Track the status of your membership application"})]})]})]})})}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("div",{className:"".concat(N.bgColor," ").concat(N.borderColor," border rounded-lg p-6"),children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:N.icon}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:N.title}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:N.description})]})]})}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Agreement Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Submitted Date"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:new Date(x.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,r.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:x.status})]}),x.signed_at&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Approved Date"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:new Date(x.signed_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Applicant"}),(0,r.jsx)("p",{className:"font-medium text-gray-900",children:(null===(e=x.form_data)||void 0===e?void 0:e.fullName)||"Unknown"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Actions"}),(0,r.jsxs)("div",{className:"space-y-4",children:["completed"===x.status&&x.pdf_url&&(0,r.jsxs)("button",{onClick:b,className:"inline-flex items-center px-4 py-2 bg-church-primary text-white font-medium rounded-md hover:bg-church-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Download Signed Agreement PDF"]}),"pending"===x.status&&(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("p",{className:"mb-2",children:(0,r.jsx)("strong",{children:"What happens next?"})}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,r.jsx)("li",{children:"Church leadership will review your application"}),(0,r.jsx)("li",{children:"A pastor will sign your agreement"}),(0,r.jsx)("li",{children:"You'll receive a PDF copy via email"}),(0,r.jsx)("li",{children:"You'll be contacted about next steps"})]})]}),(0,r.jsxs)("button",{onClick:()=>y.push("/dashboard"),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 font-medium rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-4",children:"Need Help?"}),(0,r.jsx)("p",{className:"text-blue-800 text-sm",children:"If you have questions about your membership application or need to make changes, please contact the church office or speak with a member of the pastoral team."})]})]})})]})})}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=7381)}),_N_E=e.O()}]);