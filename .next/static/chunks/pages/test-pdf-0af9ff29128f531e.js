(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4339],{7496:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/test-pdf",function(){return r(1025)}])},5747:function(e,s,r){"use strict";r.d(s,{Z:function(){return i}});var t=r(5893),a=r(7294),l=r(4976),n=r(1707),o=r(2779);function i(e){let{pdfUrl:s,title:r}=e,[i,c]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(0);(0,a.useEffect)(()=>{console.log("IframePDFViewer - PDF URL:",s),s&&(c(!0),x(null),u(e=>e+1))},[s]);let h=()=>{c(!0),x(null),u(e=>e+1)};return s?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-3 sm:p-4",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:r}),(0,t.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"PDF Document"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,t.jsx)("button",{onClick:h,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-200 rounded min-h-[44px] min-w-[44px] flex items-center justify-center",title:"Refresh PDF",children:(0,t.jsx)(l.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center px-2 sm:px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs sm:text-sm min-h-[44px]",children:[(0,t.jsx)(n.Z,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Open in New Tab"})]}),(0,t.jsxs)("a",{href:s,download:!0,className:"flex items-center px-2 sm:px-3 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 text-xs sm:text-sm min-h-[44px]",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Download"})]})]})]})}),i&&(0,t.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading PDF document..."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["URL: ",s]})]})}),d&&(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 p-6 text-center",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:d}),(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Try Again"}),(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Open PDF Directly"})]})})]}),(0,t.jsxs)("div",{className:"relative pdf-viewer-container",children:[(0,t.jsx)("iframe",{src:s,width:"100%",height:"800",className:"border-0 ".concat(i?"opacity-0":"opacity-100"," transition-opacity duration-300 w-full"),title:r||"PDF Document",onLoad:()=>{console.log("IframePDFViewer - PDF loaded successfully"),c(!1),x(null)},onError:()=>{console.error("IframePDFViewer - Error loading PDF in iframe"),x("Failed to load PDF in iframe"),c(!1)},style:{minHeight:"60vh",height:"clamp(400px, 60vh, 800px)"}},m),i&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center p-4",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Loading PDF..."})]})})]}),(0,t.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-3",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500 truncate",children:["Source: ",s]})})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No PDF URL provided"})})}},7298:function(e,s,r){"use strict";r.d(s,{KO:function(){return o},L$:function(){return c},oN:function(){return l},sN:function(){return a},t7:function(){return n},zy:function(){return i}});var t=r(9495);let a=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;try{let r=await e.arrayBuffer(),a=await t.PDFDocument.load(r),l=a.getPageCount(),n=Math.ceil(l/s),o=[];for(let e=0;e<s;e++){let s=e*n,r=Math.min(s+n-1,l-1);if(s<l){let l=await t.PDFDocument.create();for(let e=s;e<=r;e++){let[s]=await l.copyPages(a,[e]);l.addPage(s)}let n=await l.save();o.push({sectionNumber:e+1,title:"Section ".concat(e+1," (Pages ").concat(s+1,"-").concat(r+1,")"),content:n,pageRange:"".concat(s+1,"-").concat(r+1),totalPages:r-s+1})}}return{sections:o,error:null}}catch(e){return console.error("Error splitting PDF:",e),{sections:null,error:e}}},l=async(e,s)=>{try{console.log("Starting PDF sections upload...");let{data:{session:r}}=await s.auth.getSession();if(!(null==r?void 0:r.access_token))throw Error("No authentication token available");console.log("Session token available, preparing upload...");let t={sections:e.map(s=>({title:s.title,section_number:s.sectionNumber,total_sections:e.length,content:Array.from(new Uint8Array(s.content))}))};console.log("Sending request to upload API...");let a=await fetch("/api/admin/upload-sections",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.access_token)},body:JSON.stringify(t)});if(console.log("Upload API response status:",a.status),!a.ok){let e="Failed to upload sections";try{let s=await a.json();e=s.error||e,console.error("Upload API error:",s)}catch(r){let s=await a.text();console.error("Upload API returned non-JSON response:",s),e=s.includes("<html>")||s.includes("<!DOCTYPE")?"Server returned HTML instead of JSON. Check server logs for authentication issues.":"Server error: ".concat(a.status," ").concat(a.statusText)}throw Error(e)}let l=await a.json();return console.log("Upload successful:",l),{sections:l.sections,error:null}}catch(e){return console.error("Error uploading sections:",e),{sections:null,error:e}}},n=async e=>{try{if(!e)return{sections:[],error:null};let{data:s,error:r}=await e.from("pdf_sections").select("*").order("section_number");if(r)throw r;return{sections:s,error:null}}catch(e){return{sections:null,error:e}}},o=async(e,s)=>{try{if(console.log("Getting PDF URL for file path:",e),!e)return console.error("No file path provided"),null;let{data:r}=s.storage.from("pdf-sections").getPublicUrl(e);if(console.log("Generated public URL:",null==r?void 0:r.publicUrl),null==r?void 0:r.publicUrl)return console.log("Returning public URL:",r.publicUrl),r.publicUrl;return null}catch(e){return console.error("Error getting PDF URL:",e),null}},i=async(e,s,r)=>{try{if(console.log("Marking section complete:",{userId:e,sectionId:s}),!e||!s)throw Error("User ID and Section ID are required");let r=await fetch("/api/complete-section",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,sectionId:s})}),t=await r.json();if(!r.ok)throw Error(t.error||"Failed to complete section");return console.log("Section marked complete successfully:",t.data),{data:t.data,error:null}}catch(e){return console.error("Error marking section complete:",e),{data:null,error:e}}},c=async(e,s)=>{try{if(!s||!e)return{progress:[],error:null};console.log("Getting user progress for userId:",e);let{data:r,error:t}=await s.from("user_progress").select("\n        *,\n        pdf_sections (\n          id,\n          title,\n          section_number,\n          total_sections\n        )\n      ").eq("user_id",e);if(t)throw console.error("Error fetching user progress:",t),t;console.log("Raw progress data:",r);let a=(null==r?void 0:r.filter(e=>null!==e.pdf_sections))||[];return console.log("Valid progress data:",a),{progress:a,error:null}}catch(e){return console.error("getUserProgress error:",e),{progress:null,error:e}}}},1025:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return j}});var t=r(5893),a=r(7294),l=r(4733),n=r(2191),o=r(6117),i=r(9037),c=r(1258),d=r(4307),x=r(5146),m=r(3895),u=r(2779);function h(e){let{pdfUrl:s,title:r,onComplete:l}=e,[h,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(1),[f,j]=(0,a.useState)(1),[N,y]=(0,a.useState)(!0),[v,w]=(0,a.useState)(null);return((0,a.useEffect)(()=>{console.log("PDFViewer received URL:",s),s&&(y(!0),w(null))},[s]),s)?N?(0,t.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading PDF..."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["URL: ",s]})]})}):v?(0,t.jsxs)("div",{className:"bg-red-50 rounded-lg border border-red-200 p-6",children:[(0,t.jsxs)("div",{className:"text-center mb-6",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:v}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Open PDF Directly"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2 text-center",children:"Fallback PDF viewer:"}),(0,t.jsx)("iframe",{src:s,width:"100%",height:"600",className:"border border-gray-300 rounded",title:r})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{b(e=>Math.max(e-1,1))},disabled:p<=1,className:"p-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(c.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-700 px-3 py-1 bg-white border border-gray-300 rounded",children:[p," of ",h]}),(0,t.jsx)("button",{onClick:()=>{b(e=>Math.min(e+1,h))},disabled:p>=h,className:"p-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(d.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("button",{onClick:()=>{j(e=>Math.max(e-.2,.5))},className:"p-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:(0,t.jsx)(x.Z,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-700 px-3 py-1 bg-white border border-gray-300 rounded",children:[Math.round(100*f),"%"]}),(0,t.jsx)("button",{onClick:()=>{j(e=>Math.min(e+.2,2))},className:"p-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50",children:(0,t.jsx)(m.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("button",{onClick:()=>{let e=document.createElement("a");e.href=s,e.download="".concat(r,".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e)},className:"flex items-center px-3 py-2 bg-church-primary text-white rounded-md hover:bg-church-secondary",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),"Download"]})]})]})}),(0,t.jsx)("div",{className:"p-4 bg-gray-100 min-h-96",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(o.Z,{file:{url:s,httpHeaders:{},withCredentials:!1},onLoadSuccess:function(e){let{numPages:s}=e;console.log("PDF loaded successfully, pages:",s),g(s),y(!1),w(null)},onLoadError:function(e){console.error("Error loading PDF:",e),console.error("PDF URL that failed:",s),console.error("Error details:",{name:e.name,message:e.message,stack:e.stack}),w("Failed to load PDF document: ".concat(e.message||"Unknown error")),y(!1)},className:"shadow-lg",options:{cMapUrl:"//unpkg.com/pdfjs-dist@".concat(n.default.version,"/cmaps/"),cMapPacked:!0,standardFontDataUrl:"//unpkg.com/pdfjs-dist@".concat(n.default.version,"/standard_fonts/")},loading:(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading PDF document..."})]})}),children:(0,t.jsx)(i.Z,{pageNumber:p,scale:f,className:"border border-gray-300 bg-white",loading:(0,t.jsx)("div",{className:"flex items-center justify-center h-96 bg-white border border-gray-300",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading page..."})]})})})})})}),l&&(0,t.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("button",{onClick:l,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",children:"Mark Section as Complete"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Click to proceed to the next section"})]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-gray-600",children:"No PDF URL provided"})})})}function g(e){let{pdfUrl:s,title:r}=e,[l,c]=(0,a.useState)(null),[d,x]=(0,a.useState)(1),[m,u]=(0,a.useState)(!0),[h,g]=(0,a.useState)(null),[p,b]=(0,a.useState)(800);return((0,a.useEffect)(()=>{console.log("SimplePDFViewer - PDF URL:",s),s&&(u(!0),g(null),c(null),x(1))},[s]),(0,a.useEffect)(()=>{let e=()=>{b(Math.min(900,window.innerWidth-100))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),s)?m?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading PDF..."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["URL: ",s]})]}):h?(0,t.jsxs)("div",{className:"bg-red-50 rounded-lg border border-red-200 p-8 text-center",children:[(0,t.jsx)("p",{className:"text-red-600 mb-4",children:h}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["PDF URL: ",s]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700",children:"Retry"}),(0,t.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Open PDF Directly"})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Fallback PDF viewer:"}),(0,t.jsx)("iframe",{src:s,width:"100%",height:"600",className:"border border-gray-300 rounded",title:r})]})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Page ",d," of ",l]})]}),(0,t.jsx)("div",{className:"p-4 bg-gray-100",children:(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(o.Z,{file:{url:s,httpHeaders:{},withCredentials:!1},onLoadSuccess:function(e){let{numPages:s}=e;console.log("SimplePDFViewer - PDF loaded successfully, pages:",s),c(s),u(!1),g(null)},onLoadError:function(e){console.error("SimplePDFViewer - Error loading PDF:",e),console.error("SimplePDFViewer - PDF URL that failed:",s),g("Failed to load PDF: ".concat(e.message||"Unknown error")),u(!1)},options:{cMapUrl:"//unpkg.com/pdfjs-dist@".concat(n.default.version,"/cmaps/"),cMapPacked:!0,standardFontDataUrl:"//unpkg.com/pdfjs-dist@".concat(n.default.version,"/standard_fonts/"),disableWorker:!1,isEvalSupported:!1,disableAutoFetch:!1,disableStream:!1},loading:(0,t.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading document..."})]})}),children:(0,t.jsx)(i.Z,{pageNumber:d,width:p,className:"border border-gray-300 bg-white shadow-lg",loading:(0,t.jsx)("div",{className:"flex items-center justify-center h-96 bg-white border border-gray-300",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading page..."})]})})})})})}),l>1&&(0,t.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsx)("button",{onClick:()=>x(e=>Math.max(e-1,1)),disabled:d<=1,className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>x(e=>Math.min(e+1,l)),disabled:d>=l,className:"px-4 py-2 bg-blue-600 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No PDF URL provided"})})}r(4113),r(35),n.default.GlobalWorkerOptions.workerSrc="//unpkg.com/pdfjs-dist@".concat(n.default.version,"/build/pdf.worker.min.js"),console.log("PDF.js version:",n.default.version),console.log("PDF.js worker configured:",n.default.GlobalWorkerOptions.workerSrc),n.default.GlobalWorkerOptions.workerSrc="//unpkg.com/pdfjs-dist@".concat(n.default.version,"/build/pdf.worker.min.js");var p=r(5747),b=r(1046),f=r(7298);function j(){let[e,s]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[x,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[]);let u=async()=>{try{console.log("Loading sections for test...");let{sections:e,error:r}=await (0,f.t7)(b.OQ);if(r)throw r;console.log("Loaded sections:",e),s(e||[]),e&&e.length>0&&await j(e[0])}catch(e){console.error("Error loading sections:",e),m(e.message)}finally{d(!1)}},j=async e=>{try{if(console.log("Selecting section:",e),n(e),i(null),e.file_path){console.log("Getting PDF URL for:",e.file_path);let s=await (0,f.KO)(e.file_path,b.OQ);console.log("Generated PDF URL:",s),i(s)}else console.log("No file_path for section:",e)}catch(e){console.error("Error selecting section:",e),m(e.message)}};return c?(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"loading-spinner mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading PDF test..."})]})})}):(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"PDF Test Page"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Test PDF loading and display functionality"})]}),x&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsxs)("p",{className:"text-red-600",children:["Error: ",x]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Available Sections"}),0===e.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No sections found. Upload some PDFs first."}):(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("button",{onClick:()=>j(e),className:"w-full text-left p-3 rounded-md border ".concat((null==r?void 0:r.id)===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),children:[(0,t.jsx)("div",{className:"font-medium",children:e.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Section ",e.section_number," of ",e.total_sections]}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["File: ",e.file_path||"No file"]})]},e.id))})]})}),(0,t.jsx)("div",{className:"lg:col-span-3",children:r?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:r.title}),(0,t.jsxs)("p",{className:"text-gray-600",children:["Section ",r.section_number," of ",r.total_sections]}),o&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["PDF URL: ",(0,t.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:o})]})]}),o?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Iframe PDF Viewer (Recommended)"}),(0,t.jsx)(p.Z,{pdfUrl:o,title:r.title})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Simple PDF Viewer (Debug)"}),(0,t.jsx)(g,{pdfUrl:o,title:r.title})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Full PDF Viewer (PDF.js)"}),(0,t.jsx)(h,{pdfUrl:o,title:r.title,onComplete:null})]})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Loading PDF..."})})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Select a section to view its PDF"})})})]})]})})})}},3414:function(){},172:function(){},2001:function(){},3779:function(){},2258:function(){}},function(e){e.O(0,[4577,5285,9495,1262,4733,2888,9774,179],function(){return e(e.s=7496)}),_N_E=e.O()}]);