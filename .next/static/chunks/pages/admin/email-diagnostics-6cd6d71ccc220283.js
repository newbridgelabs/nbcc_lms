(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5757],{6684:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/email-diagnostics",function(){return i(1438)}])},493:function(e,s,i){"use strict";i.d(s,{Z:function(){return l}});let l=(0,i(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6691:function(e,s,i){"use strict";i.d(s,{Z:function(){return l}});let l=(0,i(3759).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9475:function(e,s,i){"use strict";i.d(s,{Z:function(){return l}});let l=(0,i(3759).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1438:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return h}});var l=i(5893),t=i(7294),r=i(4733),n=i(2435),a=i(493),c=i(9475),d=i(9200),o=i(6691),m=i(1707);function h(){let[e,s]=(0,t.useState)(!1),[i,h]=(0,t.useState)(null),x=async()=>{s(!0),h(null);let e={configCheck:!1,initCheck:!1,sendCheck:!1,errors:[]};try{let s="service_6p2szkk",i="template_h0ekplo",l="vjXyYpLgDibpvaLPL";if(console.log("=== EMAIL DIAGNOSTICS ==="),console.log("Service ID:",s),console.log("Template ID:",i),console.log("User ID:",l),s&&i&&l?e.configCheck=!0:e.errors.push("Missing environment variables"),e.configCheck){let t={to_email:"newbridgelabs@gmail.com",to_name:"Test Recipient",subject:"\uD83E\uDDEA NBCC Email Diagnostics Test",message:"This is a diagnostic test email from the NBCC Church Management System.\n\nTest Details:\n• Timestamp: ".concat(new Date().toISOString(),"\n• Service ID: ").concat(s,"\n• Template ID: ").concat(i,"\n• User ID: ").concat(l,"\n\nIf you receive this email, the email service is working correctly.\n\nThis is an automated test message."),pdf_url:"https://example.com/test.pdf",agreement_id:"DIAGNOSTIC-TEST"},r=await (0,n.n)(t);r.success?e.sendCheck=!0:e.errors.push("Email sending failed: ".concat(r.error))}h(e)}catch(s){console.error("Diagnostics error:",s),e.errors.push("Diagnostics error: ".concat(s.message)),h(e)}finally{s(!1)}},u=e=>!0===e?(0,l.jsx)(a.Z,{className:"h-5 w-5 text-green-500"}):!1===e?(0,l.jsx)(c.Z,{className:"h-5 w-5 text-red-500"}):(0,l.jsx)(d.Z,{className:"h-5 w-5 text-yellow-500"});return(0,l.jsx)(r.Z,{requireAuth:!0,children:(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,l.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,l.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(o.Z,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,l.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Email Service Diagnostics"})]}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Test and troubleshoot the email notification system"})]}),(0,l.jsxs)("div",{className:"p-6",children:[(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Current Configuration"}),(0,l.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Service ID:"}),(0,l.jsx)("br",{}),(0,l.jsx)("code",{className:"text-blue-600",children:"service_6p2szkk"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"Template ID:"}),(0,l.jsx)("br",{}),(0,l.jsx)("code",{className:"text-blue-600",children:"template_h0ekplo"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-medium",children:"User ID:"}),(0,l.jsx)("br",{}),(0,l.jsx)("code",{className:"text-blue-600",children:"vjXyYpLgDibpvaLPL"})]})]})})]}),(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)("button",{onClick:x,disabled:e,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Running Diagnostics..."]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Run Email Diagnostics"]})})}),i&&(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Diagnostic Results"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("span",{className:"font-medium",children:"Configuration Check"}),u(i.configCheck)]}),(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,l.jsx)("span",{className:"font-medium",children:"Email Send Test"}),u(i.sendCheck)]})]}),i.errors.length>0&&(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)("h3",{className:"text-md font-medium text-red-900 mb-2",children:"Issues Found:"}),(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,l.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:i.errors.map((e,s)=>(0,l.jsx)("li",{children:e},s))})})]}),i.sendCheck&&(0,l.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,l.jsx)("p",{className:"text-green-700 font-medium",children:"✅ Email service is working correctly!"}),(0,l.jsx)("p",{className:"text-green-600 text-sm mt-1",children:"Test email sent to newbridgelabs@gmail.com"})]})]}),(0,l.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,l.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Troubleshooting Guide"}),(0,l.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,l.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"Common Issues:"}),(0,l.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-yellow-700",children:[(0,l.jsx)("li",{children:"EmailJS User ID not configured in dashboard integration settings"}),(0,l.jsx)("li",{children:"EmailJS service not active or properly connected"}),(0,l.jsx)("li",{children:"Email template not published or missing required variables"}),(0,l.jsx)("li",{children:"EmailJS account quota exceeded"})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,l.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Setup Steps:"}),(0,l.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-700",children:[(0,l.jsxs)("li",{children:["Visit ",(0,l.jsxs)("a",{href:"https://dashboard.emailjs.com",target:"_blank",rel:"noopener noreferrer",className:"underline inline-flex items-center",children:["EmailJS Dashboard ",(0,l.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})]}),(0,l.jsx)("li",{children:"Go to Integration tab and ensure User ID is properly configured"}),(0,l.jsx)("li",{children:"Verify your email service is connected and active"}),(0,l.jsx)("li",{children:"Check that your email template includes all required variables"}),(0,l.jsx)("li",{children:"Ensure your template is published (not in draft mode)"})]})]})]})]})]})]})})})})}i(6501)}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=6684)}),_N_E=e.O()}]);