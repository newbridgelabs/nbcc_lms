(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4891],{4218:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/test-email-simple",function(){return s(1948)}])},1948:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(5893),i=s(7294),n=s(4733),o=s(1814),r=s(6501);function l(){let[e,t]=(0,i.useState)(!1),[s,l]=(0,i.useState)("madagalapadma2002@gmail.com"),c=async()=>{t(!0);try{console.log("=== EMAIL CONFIGURATION CHECK ==="),console.log("Service ID:","service_6p2szkk"),console.log("Template ID:","template_h0ekplo"),console.log("User ID:","vjXyYpLgDibpvaLPL"),console.log("Testing email with:",s),await (0,o.G)(s,"Test User","https://example.com/test.pdf","TEST-001"),r.default.success("Test emails sent successfully!"),console.log("✅ Test emails sent successfully")}catch(e){console.error("❌ Test email failed:",e),r.default.error("Test email failed: "+e.message)}finally{t(!1)}};return(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Test Email Functionality"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Address"}),(0,a.jsx)("input",{type:"email",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email to test"})]}),(0,a.jsx)("button",{onClick:c,disabled:e||!s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:e?"Sending Test Emails...":"Send Test Emails"})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded-md",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"What this test does:"}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,a.jsx)("li",{children:"• Sends a test user email to the specified address"}),(0,a.jsx)("li",{children:"• Sends a test admin email to newbridgelabs@gmail.com"}),(0,a.jsx)("li",{children:"• Uses the same EmailJS configuration as the agreement approval"}),(0,a.jsx)("li",{children:"• Check browser console for detailed logs"})]})]})]})})})})}},1814:function(e,t,s){"use strict";s.d(t,{G:function(){return D}});class a{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}let i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:(()=>{if("undefined"!=typeof localStorage)return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}})()},n=e=>e?"string"==typeof e?{publicKey:e}:"[object Object]"===e.toString()?e:{}:{},o=async(e,t,s={})=>{let n=await fetch(i.origin+e,{method:"POST",headers:s,body:t}),o=await n.text(),r=new a(n.status,o);if(n.ok)return r;throw r},r=(e,t,s)=>{if(!e||"string"!=typeof e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||"string"!=typeof t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||"string"!=typeof s)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},l=e=>{if(e&&"[object Object]"!==e.toString())throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},c=e=>e.webdriver||!e.languages||0===e.languages.length,m=()=>new a(451,"Unavailable For Headless Browser"),d=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if("string"!=typeof t)throw"The BlockList watchVariable has to be a string"},u=e=>!e.list?.length||!e.watchVariable,h=(e,t)=>e instanceof FormData?e.get(t):e[t],g=(e,t)=>{if(u(e))return!1;d(e.list,e.watchVariable);let s=h(t,e.watchVariable);return"string"==typeof s&&e.list.includes(s)},p=()=>new a(403,"Forbidden"),b=(e,t)=>{if("number"!=typeof e||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&"string"!=typeof t)throw"The LimitRate ID has to be a non-empty string"},f=async(e,t,s)=>{let a=Number(await s.get(e)||0);return t-Date.now()+a},y=async(e,t,s)=>{if(!t.throttle||!s)return!1;b(t.throttle,t.id);let a=t.id||e;return await f(a,t.throttle,s)>0||(await s.set(a,Date.now().toString()),!1)},w=()=>new a(429,"Too Many Requests");var v={init:(e,t="https://api.emailjs.com")=>{if(!e)return;let s=n(e);i.publicKey=s.publicKey,i.blockHeadless=s.blockHeadless,i.storageProvider=s.storageProvider,i.blockList=s.blockList,i.limitRate=s.limitRate,i.origin=s.origin||t},send:async(e,t,s,a)=>{let d=n(a),u=d.publicKey||i.publicKey,h=d.blockHeadless||i.blockHeadless,b=d.storageProvider||i.storageProvider,f={...i.blockList,...d.blockList},v={...i.limitRate,...d.limitRate};return h&&c(navigator)?Promise.reject(m()):(r(u,e,t),l(s),s&&g(f,s))?Promise.reject(p()):await y(location.pathname,v,b)?Promise.reject(w()):o("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:u,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"})}};let D=async(e,t,s,a)=>{try{console.log("=== CLIENT-SIDE EMAIL SENDING ==="),console.log("Agreement ID:",a),console.log("User Email:",e),console.log("User Name:",t),console.log("PDF URL:",s);let i="newbridgelabs@gmail.com";console.log("Admin Email:",i);let n="service_6p2szkk",o="template_h0ekplo",r="vjXyYpLgDibpvaLPL";if(!n||!o||!r)throw Error("EmailJS configuration missing");v.init(r),console.log("Sending user email...");let l={to_email:e,to_name:t,subject:"\uD83C\uDF89 Your NBCC Membership Agreement has been Approved!",message:"Dear ".concat(t,",\n\nCongratulations! \uD83C\uDF89 Your membership agreement has been approved by the church leadership.\n\n✅ Your membership status: APPROVED\n\uD83D\uDCC4 Your signed agreement is ready for download\n\uD83C\uDFDB️ Welcome to the New Bridge Community Church family!\n\nYou can download your signed agreement using the link below. Please save this document for your records.\n\nDownload Link: ").concat(s,"\n\nWe are excited to have you as part of our church community. You will receive further information about upcoming events, services, and opportunities to get involved.\n\nIf you have any questions, please don't hesitate to contact us at ").concat(i,".\n\nBlessings and welcome to the family!\n\nPastor and Leadership Team\nNew Bridge Community Church"),pdf_url:s,agreement_id:a},c=await v.send(n,o,l);console.log("✅ User email sent successfully:",c),console.log("Sending admin email...");let m={to_email:i,to_name:"NBCC Admin Team",subject:"\uD83D\uDCCB Agreement Approved and Member Notified",message:"Hello Admin Team,\n\nAn agreement has been successfully approved and the member has been notified.\n\n\uD83D\uDCCA AGREEMENT DETAILS:\n• Member Name: ".concat(t,"\n• Member Email: ").concat(e,"\n• Agreement ID: ").concat(a,"\n• Approval Date: ").concat(new Date().toLocaleDateString(),"\n• PDF Document: ").concat(s,"\n\n✅ ACTIONS COMPLETED:\n• Agreement approved by admin\n• PDF generated and uploaded\n• Member notification email sent successfully\n\nThe member has been welcomed to the church family and provided with their signed agreement document.\n\nThis is an automated notification from the NBCC Church Management System.\n\n---\nNBCC Church Management System\nAutomated Email Service"),pdf_url:s,agreement_id:a,user_name:t,user_email:e},d=await v.send(n,"template_h0ekplo",m);return console.log("✅ Admin email sent successfully:",d),{success:!0,message:"Both emails sent successfully",userResponse:c,adminResponse:d}}catch(e){throw console.error("❌ Email sending error:",e),e}}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=4218)}),_N_E=e.O()}]);