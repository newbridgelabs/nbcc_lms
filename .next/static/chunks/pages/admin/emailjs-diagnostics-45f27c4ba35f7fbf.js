(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6989],{2634:function(e,s,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/emailjs-diagnostics",function(){return i(8022)}])},493:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});let a=(0,i(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6691:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});let a=(0,i(3759).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},5264:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});let a=(0,i(3759).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9475:function(e,s,i){"use strict";i.d(s,{Z:function(){return a}});let a=(0,i(3759).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8022:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return h}});var a=i(5893),t=i(7294),l=i(4733),r=i(493),n=i(9475),c=i(9200),o=i(6691),d=i(5264),m=i(1707);i(6501);var u=i(9101);function h(){let[e,s]=(0,t.useState)(!1),[i,h]=(0,t.useState)(null),[g,x]=(0,t.useState)("newbridgelabs@gmail.com"),p=async()=>{s(!0),h(null);let e={configCheck:!1,serviceCheck:!1,templateCheck:!1,emailTest:!1,errors:[],details:{},recommendations:[]};try{console.log("=== EMAILJS DIAGNOSTICS ===");let s="service_6p2szkk",i="template_h0ekplo",a="vjXyYpLgDibpvaLPL";if(e.details.config={serviceId:s,templateId:i,userId:a?a.substring(0,8)+"...":"Not set"},s&&i&&a?e.configCheck=!0:e.errors.push("Missing EmailJS configuration variables"),e.configCheck)try{u.default.init(a),e.serviceCheck=!0,console.log("EmailJS initialized successfully")}catch(s){e.errors.push("EmailJS initialization failed: ".concat(s.message))}if(e.serviceCheck&&g)try{console.log("Testing email send to:",g);let a={to_email:g,to_name:"Test Recipient",subject:"\uD83E\uDDEA EmailJS Diagnostic Test",message:"This is a diagnostic test email from NBCC Church Management System.\n\nIf you receive this email, EmailJS is working correctly.\n\nTest Details:\n• Timestamp: ".concat(new Date().toISOString(),"\n• Service ID: ").concat(s,"\n• Template ID: ").concat(i,"\n• Test Type: Diagnostic\n\nThis is an automated test message."),user_os:navigator.platform||"Unknown",user_platform:navigator.userAgent.includes("Windows")?"Windows":navigator.userAgent.includes("Mac")?"Mac":navigator.userAgent.includes("Linux")?"Linux":"Unknown",user_browser:navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":navigator.userAgent.includes("Safari")?"Safari":"Unknown",user_version:"1.0.0",user_country:"Unknown",user_ip:"Unknown",user_referrer:window.location.href,website_url:window.location.origin};console.log("Sending test email with params:",a);let t=await u.default.send(s,i,a);console.log("EmailJS send result:",t),200===t.status?(e.emailTest=!0,e.details.emailResult={status:t.status,text:t.text}):(e.errors.push("Email send failed with status: ".concat(t.status)),e.details.emailResult=t)}catch(s){console.error("Email test error:",s),e.errors.push("Email test failed: ".concat(s.message)),e.details.emailError=s.message}e.configCheck||e.recommendations.push("Check your .env.local file for correct EmailJS configuration"),e.serviceCheck||e.recommendations.push("Verify your EmailJS User ID in the dashboard"),!e.emailTest&&e.serviceCheck&&(e.recommendations.push("Check your EmailJS service configuration (Gmail settings)"),e.recommendations.push("Verify your template exists and is published"),e.recommendations.push("Check spam folder for test emails")),e.emailTest&&(e.recommendations.push("EmailJS is working! Check spam folder if emails are not received"),e.recommendations.push("Consider switching to a more reliable email service for production")),h(e)}catch(s){console.error("Diagnostics error:",s),e.errors.push("Diagnostics error: ".concat(s.message)),h(e)}finally{s(!1)}},f=e=>!0===e?(0,a.jsx)(r.Z,{className:"h-5 w-5 text-green-500"}):!1===e?(0,a.jsx)(n.Z,{className:"h-5 w-5 text-red-500"}):(0,a.jsx)(c.Z,{className:"h-5 w-5 text-yellow-500"});return(0,a.jsx)(l.Z,{requireAuth:!0,children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"EmailJS Diagnostics"})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Diagnose EmailJS configuration and email delivery issues"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Email Address"}),(0,a.jsx)("input",{type:"email",value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email to test"})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("button",{onClick:p,disabled:e||!g,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Running Diagnostics..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Run EmailJS Diagnostics"]})})}),i&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Diagnostic Results"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"Configuration Check"}),f(i.configCheck)]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"Service Initialization"}),f(i.serviceCheck)]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-medium",children:"Email Send Test"}),f(i.emailTest)]})]}),i.details.config&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-gray-900 mb-2",children:"Configuration:"}),(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:JSON.stringify(i.details.config,null,2)})})]}),i.errors.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-red-900 mb-2",children:"Issues Found:"}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-red-700",children:i.errors.map((e,s)=>(0,a.jsx)("li",{children:e},s))})})]}),i.recommendations.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"text-md font-medium text-blue-900 mb-2",children:"Recommendations:"}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-700",children:i.recommendations.map((e,s)=>(0,a.jsx)("li",{children:e},s))})})]})]}),(0,a.jsxs)("div",{className:"mt-8 border-t pt-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"EmailJS Setup Guide"}),(0,a.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"Common Issues:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-yellow-700",children:[(0,a.jsx)("li",{children:"Gmail service might be blocking emails"}),(0,a.jsx)("li",{children:"Template parameters don't match your template"}),(0,a.jsx)("li",{children:"Using User ID instead of Public Key"}),(0,a.jsx)("li",{children:"Service not properly configured in EmailJS dashboard"})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Setup Steps:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-blue-700",children:[(0,a.jsxs)("li",{children:["Go to ",(0,a.jsxs)("a",{href:"https://dashboard.emailjs.com",target:"_blank",rel:"noopener noreferrer",className:"underline inline-flex items-center",children:["EmailJS Dashboard ",(0,a.jsx)(m.Z,{className:"h-3 w-3 ml-1"})]})]}),(0,a.jsx)("li",{children:"Create/verify your email service (Gmail, Outlook, etc.)"}),(0,a.jsx)("li",{children:"Create/update your email template"}),(0,a.jsx)("li",{children:"Get your Service ID, Template ID, and Public Key"}),(0,a.jsx)("li",{children:"Update your .env.local file with correct values"})]})]})]})]})]})]})})})})}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=2634)}),_N_E=e.O()}]);