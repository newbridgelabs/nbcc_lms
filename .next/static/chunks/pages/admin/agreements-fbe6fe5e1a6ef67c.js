(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4359],{8261:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/agreements",function(){return s(7917)}])},2761:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},493:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5928:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6127:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(3759).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},7917:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(5893),r=s(7294),n=s(1163),l=s(4733),i=s(1046),c=s(1164),d=s(39),o=s(493),m=s(2761),x=s(6127),u=s(2553),h=s(5928),p=s(6501);function g(){let e;let[t,s]=(0,r.useState)(null),[g,y]=(0,r.useState)([]),[f,w]=(0,r.useState)(!0),[N,j]=(0,r.useState)("all"),[v,b]=(0,r.useState)(""),k=(0,n.useRouter)();(0,r.useEffect)(()=>{Z()},[]);let Z=async()=>{let{isAdmin:e,user:t}=await (0,c.jW)(k,s,w);e&&t&&await _()},_=async()=>{try{let{data:e,error:t}=await i.OQ.from("agreements").select("*, users(full_name, email)").order("created_at",{ascending:!1});if(t)throw t;y(e||[])}catch(e){console.error("Error loading agreements:",e),p.default.error("Failed to load agreements")}},C=e=>{switch(e){case"pending":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[(0,a.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),"Pending"]});case"completed":return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),"Completed"]});default:return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Unknown"})}};if(f)return(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"loading-spinner"})})});let S=(e=g,"all"!==N&&(e=e.filter(e=>e.status===N)),v&&(e=e.filter(e=>{var t,s,a,r;return(null===(s=e.form_data)||void 0===s?void 0:null===(t=s.fullName)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(r=e.users)||void 0===r?void 0:null===(a=r.email)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase()))})),e);return(0,a.jsx)(l.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("button",{onClick:()=>k.push("/admin"),className:"mr-4 p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold leading-7 text-gray-900",children:"Membership Agreements"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Review and approve membership applications"})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>j("all"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("all"===N?"bg-church-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["All (",g.length,")"]}),(0,a.jsxs)("button",{onClick:()=>j("pending"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("pending"===N?"bg-church-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Pending (",g.filter(e=>"pending"===e.status).length,")"]}),(0,a.jsxs)("button",{onClick:()=>j("completed"),className:"px-4 py-2 text-sm font-medium rounded-md ".concat("completed"===N?"bg-church-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Completed (",g.filter(e=>"completed"===e.status).length,")"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(x.Z,{className:"h-5 w-5 text-gray-400"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:v,onChange:e=>b(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-church-primary focus:border-church-primary"})]})]})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:0===S.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(u.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No agreements found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"all"===N?"No membership agreements have been submitted yet.":"No ".concat(N," agreements found.")})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Applicant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(null===(t=e.form_data)||void 0===t?void 0:t.fullName)||"Unknown"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(null===(s=e.users)||void 0===s?void 0:s.email)||"No email"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:C(e.status)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.signed_at?new Date(e.signed_at).toLocaleDateString():"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("button",{onClick:()=>k.push("/admin/agreements/".concat(e.id)),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-church-primary hover:text-church-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),"Review"]})})]},e.id)})})]})})})]})]})})}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=8261)}),_N_E=e.O()}]);