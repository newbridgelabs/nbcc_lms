(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2884],{7370:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sermons/create",function(){return s(4750)}])},2761:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3832:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(3759).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},5928:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(3759).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},4270:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(3759).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9819:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(3759).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},4750:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return f}});var t=s(5893),n=s(7294),a=s(1163),i=s(4733),o=s(1046),c=s(1164),l=s(2761),d=s(4270);let u=(0,s(3759).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var m=s(3832),h=s(5928),x=s(9819),p=s(6501);function f(){let[e,r]=(0,n.useState)(null),[s,f]=(0,n.useState)(!0),[y,g]=(0,n.useState)(!1),[b,j]=(0,n.useState)(!1),N=(0,a.useRouter)(),[v,w]=(0,n.useState)({title:"",description:"",sermon_date:"",pastor_name:"",scripture_reference:""}),[_,k]=(0,n.useState)([{question_text:"",is_private:!0,placeholder_text:""}]);(0,n.useEffect)(()=>{C()},[]);let C=async()=>{try{let e=await (0,o.ts)();if(!e){N.push("/auth/login");return}if(r(e),!await (0,c.Cn)(e.id,e.email)){N.push("/dashboard");return}j(!0)}catch(e){console.error("Error checking access:",e),p.default.error("Failed to verify access")}finally{f(!1)}},S=e=>{let{name:r,value:s}=e.target;w(e=>({...e,[r]:s}))},Z=(e,r,s)=>{k(t=>t.map((t,n)=>n===e?{...t,[r]:s}:t))},q=e=>{_.length>1&&k(r=>r.filter((r,s)=>s!==e))},E=async e=>{if(e.preventDefault(),!v.title||!v.sermon_date){p.default.error("Title and sermon date are required");return}let r=_.filter(e=>e.question_text.trim());if(0===r.length){p.default.error("At least one question is required");return}g(!0);try{let e=await fetch("/api/sermons",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,questions:r})}),s=await e.json();if(e.ok)p.default.success("Sermon created successfully!"),N.push("/admin/sermons");else throw Error(s.error||"Failed to create sermon")}catch(e){console.error("Error creating sermon:",e),p.default.error(e.message||"Failed to create sermon")}finally{g(!1)}};return s?(0,t.jsx)(i.Z,{requireAuth:!0,children:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"loading-spinner"})})}):b?(0,t.jsx)(i.Z,{requireAuth:!0,children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("button",{onClick:()=>N.push("/admin/sermons"),className:"mr-4 p-2 text-gray-400 hover:text-gray-600 rounded-md",children:(0,t.jsx)(l.Z,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Create New Sermon"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Set up an interactive sermon with questions and notes"})]})]})})}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,t.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Sermon Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sermon Title *"}),(0,t.jsx)("input",{type:"text",name:"title",value:v.title,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"Enter sermon title"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sermon Date *"}),(0,t.jsx)("input",{type:"date",name:"sermon_date",value:v.sermon_date,onChange:S,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pastor Name"}),(0,t.jsx)("input",{type:"text",name:"pastor_name",value:v.pastor_name,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"Pastor's name"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Scripture Reference"}),(0,t.jsx)("input",{type:"text",name:"scripture_reference",value:v.scripture_reference,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"e.g., John 3:16, Romans 8:28-30"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,t.jsx)("textarea",{name:"description",value:v.description,onChange:S,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"Brief description of the sermon"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Sermon Questions & Notes"}),(0,t.jsxs)("button",{type:"button",onClick:()=>{k(e=>[...e,{question_text:"",is_private:!0,placeholder_text:""}])},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-church-primary hover:bg-church-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Add Question"]})]}),(0,t.jsx)("div",{className:"space-y-6",children:_.map((e,r)=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Question ",r+1]}),_.length>1&&(0,t.jsx)("button",{type:"button",onClick:()=>q(r),className:"text-red-600 hover:text-red-800",children:(0,t.jsx)(u,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question Text *"}),(0,t.jsx)("textarea",{value:e.question_text,onChange:e=>Z(r,"question_text",e.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"Enter your question or prompt"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Placeholder Text"}),(0,t.jsx)("input",{type:"text",value:e.placeholder_text,onChange:e=>Z(r,"placeholder_text",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-church-primary focus:border-church-primary",placeholder:"Hint text for users"})]}),(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("button",{type:"button",onClick:()=>Z(r,"is_private",!e.is_private),className:"flex items-center px-3 py-2 rounded-md text-sm font-medium ".concat(e.is_private?"bg-green-100 text-green-800 border border-green-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"),children:e.is_private?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-2"}),"Private Notes (User Only)"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Visible to Admin"]})})})]})]},r))})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>N.push("/admin/sermons"),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:y,className:"inline-flex items-center px-6 py-2 bg-church-primary text-white rounded-md hover:bg-church-secondary focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-church-primary disabled:opacity-50 disabled:cursor-not-allowed",children:y?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"loading-spinner w-4 h-4 mr-2"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Create Sermon"]})})]})]})})]})}):null}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=7370)}),_N_E=e.O()}]);