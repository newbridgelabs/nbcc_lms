(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1833],{4588:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/sermons/[id]/view",function(){return t(8521)}])},5518:function(e,s,t){"use strict";t.d(s,{ax:function(){return r}});var a=t(1046);let r=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let{data:{session:t}}=await a.OQ.auth.getSession();if(!(null==t?void 0:t.access_token))throw Error("No authentication token available");let r={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.access_token),...s.headers};return await fetch(e,{...s,headers:r})}catch(e){throw console.error("Authenticated fetch error:",e),e}}},2761:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3543:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]])},3346:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},5452:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},6815:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},8267:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9176:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8521:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return j}});var a=t(5893),r=t(7294),n=t(1163),i=t(4733),c=t(1046),l=t(1164),d=t(5518),o=t(2761),m=t(3346),x=t(8267),h=t(3543),u=t(6815),p=t(5452),y=t(9176);let f=(0,t(3759).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=t(6501);function j(){let[e,s]=(0,r.useState)(null),[t,j]=(0,r.useState)(null),[N,v]=(0,r.useState)([]),[b,w]=(0,r.useState)({totalParticipants:0,completedParticipants:0,totalResponses:0,publicQuestions:0}),[k,_]=(0,r.useState)(!0),[Z,S]=(0,r.useState)(!1),P=(0,n.useRouter)(),{id:M}=P.query;(0,r.useEffect)(()=>{M&&C()},[M]);let C=async()=>{try{let e=await (0,c.ts)();if(!e){P.push("/auth/login");return}if(s(e),!await (0,l.Cn)(e.id,e.email)){g.default.error("Admin access required"),P.push("/dashboard");return}S(!0),await E()}catch(e){console.error("Error checking access:",e),g.default.error("Failed to verify access"),P.push("/dashboard")}finally{_(!1)}},E=async()=>{try{let e=await (0,d.ax)("/api/sermons"),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to load sermon");let t=s.sermons.find(e=>e.id===M);if(!t){g.default.error("Sermon not found"),P.push("/admin/sermons");return}j(t),v(t.sermon_questions||[]),await q()}catch(e){console.error("Error loading data:",e),g.default.error("Failed to load sermon data")}},q=async()=>{try{w({totalParticipants:0,completedParticipants:0,totalResponses:0,publicQuestions:0})}catch(e){console.error("Error loading stats:",e)}},A=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return k?(0,a.jsx)(i.Z,{requireAuth:!0,children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"loading-spinner"})})}):Z&&t?(0,a.jsx)(i.Z,{requireAuth:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center min-w-0 flex-1",children:[(0,a.jsx)("button",{onClick:()=>P.push("/admin/sermons"),className:"mr-4 p-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:t.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mt-1 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),A(t.sermon_date)]}),t.pastor_name&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),t.pastor_name]}),t.scripture_reference&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),t.scripture_reference]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>P.push("/admin/sermons/".concat(M,"/edit")),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsxs)("button",{onClick:()=>P.push("/admin/sermons/".concat(M,"/questions")),className:"inline-flex items-center px-4 py-2 bg-church-primary text-white text-sm font-medium rounded-md hover:bg-church-secondary",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Q&A"]})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Sermon Details"}),t.description&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-600",children:t.description})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Date:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:A(t.sermon_date)})]}),t.pastor_name&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Pastor:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:t.pastor_name})]}),t.scripture_reference&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Scripture:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:t.scripture_reference})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Status:"}),(0,a.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs ".concat(t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:t.is_active?"Active":"Inactive"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Questions (",N.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:N.map((e,s)=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-500 mr-3",children:["Question ",s+1]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(e.is_private?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.is_private?"Private Notes":"Public Q&A"})]}),(0,a.jsx)("p",{className:"text-gray-900 mb-2",children:e.question_text}),e.placeholder_text&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 italic",children:["Placeholder: ",e.placeholder_text]})]})})},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Participation Stats"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Participants"})]}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:b.totalParticipants})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:b.completedParticipants})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Public Questions"})]}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:b.publicQuestions})]})]})]}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{onClick:()=>P.push("/sermons/".concat(M)),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md border border-gray-200",children:"View as User"}),(0,a.jsx)("button",{onClick:()=>P.push("/admin/sermons/".concat(M,"/questions")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md border border-gray-200",children:"Manage Q&A"}),(0,a.jsx)("button",{onClick:()=>P.push("/admin/sermons/".concat(M,"/edit")),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md border border-gray-200",children:"Edit Sermon"})]})]})]})]})})]})}):null}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=4588)}),_N_E=e.O()}]);