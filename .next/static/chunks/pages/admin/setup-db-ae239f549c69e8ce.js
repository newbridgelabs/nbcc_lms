(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3848],{5118:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/setup-db",function(){return s(5302)}])},3765:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(3759).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},493:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8289:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(3759).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},9354:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(3759).Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},5302:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(5893),a=s(7294),i=s(4733),d=s(1046),r=s(9354),c=s(493),l=s(3765),o=s(8289),m=s(6501);function u(){let[e,t]=(0,a.useState)(null),[s,u]=(0,a.useState)(!1),x='-- Create multimedia content table for rich section content\nCREATE TABLE IF NOT EXISTS multimedia_content (\n  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,\n  section_id UUID REFERENCES pdf_sections(id) ON DELETE CASCADE,\n  content_type VARCHAR(50) NOT NULL, -- \'text\', \'image\', \'video\', \'audio\', \'pdf\', \'embed\'\n  title VARCHAR(255),\n  content_data JSONB NOT NULL, -- Flexible storage for different content types\n  display_order INTEGER NOT NULL DEFAULT 0,\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n);\n\n-- Create index for faster queries\nCREATE INDEX IF NOT EXISTS idx_multimedia_content_section_id ON multimedia_content(section_id);\nCREATE INDEX IF NOT EXISTS idx_multimedia_content_order ON multimedia_content(section_id, display_order);\n\n-- Enable RLS\nALTER TABLE multimedia_content ENABLE ROW LEVEL SECURITY;\n\n-- Create policies (drop existing ones first to avoid conflicts)\nDROP POLICY IF EXISTS "Allow authenticated users to read multimedia content" ON multimedia_content;\nDROP POLICY IF EXISTS "Allow authenticated users to insert multimedia content" ON multimedia_content;\nDROP POLICY IF EXISTS "Allow authenticated users to update multimedia content" ON multimedia_content;\nDROP POLICY IF EXISTS "Allow authenticated users to delete multimedia content" ON multimedia_content;\n\nCREATE POLICY "Allow authenticated users to read multimedia content" ON multimedia_content\n  FOR SELECT TO authenticated USING (true);\n\nCREATE POLICY "Allow authenticated users to insert multimedia content" ON multimedia_content\n  FOR INSERT TO authenticated WITH CHECK (true);\n\nCREATE POLICY "Allow authenticated users to update multimedia content" ON multimedia_content\n  FOR UPDATE TO authenticated USING (true);\n\nCREATE POLICY "Allow authenticated users to delete multimedia content" ON multimedia_content\n  FOR DELETE TO authenticated USING (true);\n\n-- Create function to update updated_at timestamp\nCREATE OR REPLACE FUNCTION update_multimedia_content_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n  NEW.updated_at = NOW();\n  RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\n-- Create trigger\nDROP TRIGGER IF EXISTS update_multimedia_content_updated_at ON multimedia_content;\nCREATE TRIGGER update_multimedia_content_updated_at\n  BEFORE UPDATE ON multimedia_content\n  FOR EACH ROW\n  EXECUTE FUNCTION update_multimedia_content_updated_at();',h=async()=>{u(!0);try{let{data:e,error:s}=await d.OQ.from("multimedia_content").select("id").limit(1);s?"42P01"===s.code?t({success:!1,message:"Table does not exist. Please run the SQL script manually.",error:s.message}):t({success:!1,message:"Table access error",error:s.message}):t({success:!0,message:"Multimedia content table is set up and accessible!",data:e})}catch(e){t({success:!1,message:"Unexpected error",error:e.message})}finally{u(!1)}};return(0,n.jsx)(i.Z,{children:(0,n.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(r.Z,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Database Setup"}),(0,n.jsx)("p",{className:"mt-2 text-gray-600",children:"Set up multimedia content table for rich section content"})]})]})}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Test Table Access"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Click the button below to test if the multimedia_content table exists and is accessible."}),(0,n.jsx)("button",{onClick:h,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:s?"Testing...":"Test Table Access"}),e&&(0,n.jsxs)("div",{className:"mt-4 p-4 rounded-lg ".concat(e.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,n.jsxs)("div",{className:"flex items-center",children:[e.success?(0,n.jsx)(c.Z,{className:"h-5 w-5 text-green-600 mr-2"}):(0,n.jsx)(l.Z,{className:"h-5 w-5 text-red-600 mr-2"}),(0,n.jsx)("span",{className:e.success?"text-green-800":"text-red-800",children:e.message})]}),e.error&&(0,n.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Error: ",e.error]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"SQL Setup Script"}),(0,n.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(x),m.default.success("SQL script copied to clipboard!")},className:"flex items-center px-3 py-2 bg-gray-100 text-gray-700 rounded hover:bg-gray-200",children:[(0,n.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Copy to Clipboard"]})]}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"If the table doesn't exist, copy the SQL script below and run it in your Supabase dashboard:"}),(0,n.jsx)("div",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto",children:(0,n.jsx)("pre",{className:"text-sm whitespace-pre-wrap",children:x})}),(0,n.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"Instructions:"}),(0,n.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1",children:[(0,n.jsx)("li",{children:"1. Go to your Supabase dashboard"}),(0,n.jsx)("li",{children:"2. Navigate to the SQL Editor"}),(0,n.jsx)("li",{children:"3. Copy and paste the SQL script above"}),(0,n.jsx)("li",{children:'4. Click "Run" to execute the script'}),(0,n.jsx)("li",{children:'5. Return here and click "Test Table Access" to verify'})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-8",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Multimedia Content Features"}),(0,n.jsx)("p",{className:"text-gray-600 mb-4",children:"Once the table is set up, you'll be able to add rich content to your sections:"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCDD Rich Text"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Add formatted text content with HTML support"})]}),(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDDBCÔ∏è Images"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Embed images with captions and alt text"})]}),(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83C\uDFA5 Videos"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Embed YouTube videos or upload video files"})]}),(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83C\uDFB5 Audio"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Add audio files with optional transcripts"})]}),(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDCC4 PDF Documents"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Embed additional PDF documents"})]}),(0,n.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"\uD83D\uDD17 Embed Code"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Add custom embed codes for external content"})]})]})]})]})})})}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=5118)}),_N_E=e.O()}]);