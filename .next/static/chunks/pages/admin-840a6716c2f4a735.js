(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6964],{8195:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(6093)}])},3765:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},493:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},39:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3283:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2220:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},9176:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(3759).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},6093:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(5893),l=t(7294),n=t(1163),i=t(4733),r=t(1046),d=t(1164),c=t(9176),m=t(39),x=t(493),h=t(2089),o=t(3283),u=t(2553),g=t(3765),p=t(2220),j=t(6501);function f(){let[e,s]=(0,l.useState)(null),[t,f]=(0,l.useState)(!0),[y,N]=(0,l.useState)({totalUsers:0,pendingAgreements:0,completedAgreements:0,totalSections:0}),[w,v]=(0,l.useState)([]),b=(0,n.useRouter)();(0,l.useEffect)(()=>{k()},[]);let k=async()=>{let{isAdmin:e,user:t}=await (0,d.jW)(b,s,f);e&&t&&await Z()},Z=async()=>{try{let{count:e}=await r.OQ.from("users").select("*",{count:"exact",head:!0}),{data:s,error:t}=await r.OQ.from("agreements").select("*, users(full_name, email)").order("created_at",{ascending:!1});if(t)throw t;let{count:a}=await r.OQ.from("pdf_sections").select("*",{count:"exact",head:!0}),l=(null==s?void 0:s.filter(e=>"pending"===e.status).length)||0,n=(null==s?void 0:s.filter(e=>"completed"===e.status).length)||0;N({totalUsers:e||0,pendingAgreements:l,completedAgreements:n,totalSections:a||0}),v((null==s?void 0:s.filter(e=>"pending"===e.status))||[])}catch(e){console.error("Error loading dashboard data:",e),j.default.error("Failed to load dashboard data")}};return t?(0,a.jsx)(i.Z,{children:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"loading-spinner"})})}):(0,a.jsx)(i.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,a.jsx)("div",{className:"md:flex md:items-center md:justify-between",children:(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold leading-7 text-gray-900 truncate",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Manage church membership system"})]})})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-4 sm:p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(c.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Users"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:y.totalUsers})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pending Agreements"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:y.pendingAgreements})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completed Agreements"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:y.completedAgreements})]})})]})})}),(0,a.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,a.jsx)("div",{className:"p-5",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,a.jsxs)("dl",{children:[(0,a.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Study Sections"}),(0,a.jsx)("dd",{className:"text-lg font-medium text-gray-900",children:y.totalSections})]})})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsx)("button",{onClick:()=>b.push("/admin/upload"),className:"bg-white p-4 sm:p-6 rounded-lg shadow hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary mr-3 sm:mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left min-w-0",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:"Upload Study Materials"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Add new PDF sections"})]})]})}),(0,a.jsx)("button",{onClick:()=>b.push("/admin/agreements"),className:"bg-white p-4 sm:p-6 rounded-lg shadow hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary mr-3 sm:mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left min-w-0",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:"Review Agreements"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Sign and approve memberships"})]})]})}),(0,a.jsx)("button",{onClick:()=>b.push("/admin/users"),className:"bg-white p-4 sm:p-6 rounded-lg shadow hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary mr-3 sm:mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left min-w-0",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:"Manage Users"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"View user progress"})]})]})}),(0,a.jsx)("button",{onClick:()=>b.push("/admin/user-status-check"),className:"bg-white p-4 sm:p-6 rounded-lg shadow hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary mr-3 sm:mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left min-w-0",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:"User Status Check"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Troubleshoot login issues"})]})]})}),(0,a.jsx)("button",{onClick:()=>b.push("/admin/allowed-users"),className:"bg-white p-4 sm:p-6 rounded-lg shadow hover:shadow-md transition-shadow min-h-[80px] sm:min-h-[100px]",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-6 w-6 sm:h-8 sm:w-8 text-church-primary mr-3 sm:mr-4 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-left min-w-0",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:"Allowed Users"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"Manage registration access"})]})]})})]}),w.length>0&&(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:["Pending Agreements (",w.length,")"]}),(0,a.jsx)("div",{className:"space-y-4",children:w.slice(0,5).map(e=>{var s,t;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900",children:(null===(s=e.form_data)||void 0===s?void 0:s.fullName)||"Unknown"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[null===(t=e.users)||void 0===t?void 0:t.email," • Submitted ",new Date(e.created_at).toLocaleDateString()]})]}),(0,a.jsx)("button",{onClick:()=>b.push("/admin/agreements/".concat(e.id)),className:"bg-church-primary text-white px-4 py-2 rounded-md text-sm hover:bg-church-secondary",children:"Review"})]},e.id)})}),w.length>5&&(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("button",{onClick:()=>b.push("/admin/agreements"),className:"text-church-primary hover:text-church-secondary text-sm font-medium",children:["View all ",w.length," pending agreements →"]})})]})})]})]})})}}},function(e){e.O(0,[5285,4733,2888,9774,179],function(){return e(e.s=8195)}),_N_E=e.O()}]);